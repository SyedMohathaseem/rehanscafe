<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REHAN'S Multi Cuisine Restaurants | Modern Dining Experience</title>
    <meta name="description" content="Experience premium dining at REHAN'S Multi Cuisine Restaurants. Fresh ingredients, modern atmosphere, and exquisite taste.">
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#d4af37">
    <link rel="apple-touch-icon" href="rehans.jpeg">

    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // Initialize EmailJS - required for sending emails
            emailjs.init("service_2x94jhf"); // Your EmailJS public key
        })();
    </script>

    <style>
        /* --- VARIABLES & RESET --- */
        :root {
            --primary: #d4af37; /* Gold */
            --primary-hover: #b59021;
            --dark: #0f0f0f;
            --dark-glass: rgba(15, 15, 15, 0.9);
            --light: #ffffff;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --gradient: linear-gradient(135deg, #d4af37, #f3e5ab);
            --shadow: 0 10px 30px rgba(0,0,0,0.5);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark);
            color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4 {
            font-family: 'Playfair Display', serif;
        }

        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        img { width: 100%; display: block; }

        /* --- UTILITY CLASSES --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-size: 3rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .section-title p {
            color: #ccc;
            font-size: 1.1rem;
        }

        .btn {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            text-transform: uppercase;
            font-size: 1.05rem;
            letter-spacing: 1px;
            min-width: 100px;
            min-height: 44px; /* Minimum touch target size */
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background: var(--gradient);
            color: var(--dark);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }

        .btn-outline {
            border: 2px solid var(--primary);
            color: var(--primary);
            background: transparent;
        }

        .btn-outline:hover {
            background: var(--primary);
            color: var(--dark);
        }

        section {
            padding: 80px 0;
        }

        /* --- NAVIGATION --- */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            z-index: 1000;
            padding: 20px 0;
            transition: var(--transition);
        }

        nav.sticky {
            background: var(--dark-glass);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px 0 5px;
            gap: 12px;
            max-width: 1400px;
            margin: 0 auto;
            height: 72px; /* fixed nav height for consistent alignment */
            box-sizing: border-box;
            transform: none; /* Removed problematic shift */
        }

        /* Customer area integrated into navbar flow */
        #customerArea {
            flex: 0 1 auto;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
            padding-left: 10px;
            padding-right: 5px;
            max-width: 250px;
        }

        #customerArea span {
            color: var(--primary);
            font-weight: 600;
            font-size: 0.9rem;
            max-width: 160px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #customerArea button {
            padding: 5px 10px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            background: var(--primary);
            color: var(--dark);
            font-weight: 600;
            font-size: 0.85rem;
            transition: var(--transition);
            flex-shrink: 0;
        }

        #customerArea button:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }

        /* Style for injected customer status list item */
        /* Prevent logo/name wrapping and allow search to shrink correctly */
        .nav-container { flex-wrap: nowrap; }
        .logo { flex: 0 0 auto; display:flex; align-items:center; height:100%; }
        .logo img { height: 72px; width: auto; }
        .logo span { display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 420px; }
        /* Search expands to fill available space but can shrink; min-width prevents collapse */
        /* Ensure the icon and voice button don't overlap the input */
        .search-wrapper { flex: 1 1 auto; min-width: 180px; max-width: 450px; display:flex; align-items:center; gap:8px; height:56px; position:relative; }
        .search-wrapper .search-icon { position:absolute; left:12px; top:50%; transform:translateY(-50%); color:#666; pointer-events:none; z-index:1; }
        .search-wrapper input#siteSearch { width:100%; padding:10px 50px 10px 44px; border-radius:999px; border:1px solid rgba(0,0,0,0.08); background: #ffffff; color:#111; outline:none; font-size:1rem; }
        #voiceBtn { position:absolute; right:8px; top:50%; transform:translateY(-50%); background:transparent; border:none; color:#666; padding:6px 8px; border-radius:999px; cursor:pointer; z-index:1; transition: all 0.3s ease; }
        #voiceBtn:hover { background: rgba(0,0,0,0.05); }
        #voiceBtn.listening { background: #ef4444; color: #ffffff; animation: pulse-red 1.5s ease-in-out infinite; }
        
        @keyframes pulse-red {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            50% { box-shadow: 0 0 0 8px rgba(239, 68, 68, 0); }
        }
        
        .nav-links { flex: 0 0 auto; display:flex; align-items:center; gap:14px; flex-wrap:nowrap; }
        .nav-links > li { display:inline-flex; align-items:center; height:56px; flex:0 0 auto; }
        /* allow nav-links to scroll horizontally if items exceed available space */
        .nav-links { overflow-x:auto; -webkit-overflow-scrolling:touch; }

        /* Laptop screens (1024px - 1200px) - Prevent navbar clashing */
        @media (min-width: 769px) and (max-width: 1200px) {
            .nav-container { padding: 0 12px; gap: 8px; }
            .search-wrapper { flex: 1 1 auto; min-width: 160px; max-width: 350px; margin: 0 10px; }
            .nav-links { gap: 8px; }
            .nav-links a, .admin-link { font-size: 0.95rem; padding: 6px 10px; }
            .btn { font-size: 0.95rem; padding: 6px 10px; }
            .logo span { max-width: 180px; font-size: 1.3rem; }
        }

        /* Smallest laptop screens (1024px - 1100px) - Very aggressive spacing reduction */
        @media (min-width: 769px) and (max-width: 1100px) {
            .nav-container { padding: 0 10px; gap: 6px; }
            .search-wrapper { flex: 1 1 auto; min-width: 140px; max-width: 300px; margin: 0 8px; }
            .nav-links { gap: 6px; }
            .nav-links a { font-size: 0.9rem; padding: 6px 8px; }
            .admin-link { font-size: 0.9rem; padding: 6px 8px; }
            .btn { font-size: 0.9rem; padding: 6px 8px; }
            /* Hide restaurant name to save space */
            .logo span { display: none !important; }
        }

        /* Wide desktop screens - Optimize spacing */
        @media (min-width: 1201px) {
            .search-wrapper { max-width: 450px; }
            .nav-links { gap: 18px; }
        }

        /* Tablet and small screens */
        @media (max-width: 768px) {
            .nav-container { padding: 0 8px; gap: 6px; }
            .logo img { height: 48px; width: auto; }
            .search-wrapper { flex: 1 1 auto; min-width: 120px; max-width: 280px; margin: 0 6px; }
            #customerArea { max-width: 180px; padding-left: 6px; padding-right: 4px; }
            #customerArea span { font-size: 0.8rem; max-width: 100px; }
            #customerArea button { padding: 4px 8px; font-size: 0.75rem; }
            
            /* Floating icons need more spacing */
            .notif-icon { bottom: 190px; width: 46px; height: 46px; right: 16px; }
            .chat-widget { bottom: 130px; width: 46px; height: 46px; right: 16px; }
            .cart-icon { bottom: 30px; width: 54px; height: 54px; right: 16px; }
            .notif-icon i, .chat-widget i { font-size: 1.1rem; }
            .cart-icon i { font-size: 1.3rem; }
            
            /* Move bottom nav up to avoid cart icon */
            .bottom-nav { bottom: 100px; padding: 8px 14px; }
        }

        /* Mobile screens */
        @media (max-width: 600px) {
            .nav-container { padding: 0 6px; gap: 4px; }
            /* Allow the restaurant name to wrap and reduce logo image size so full name is visible */
            .logo img { height: 40px; width: auto; }
            /* Hide restaurant name on small screens to maximize space for search */
            .logo span { display: none !important; }
            .search-wrapper { flex: 1 1 auto; min-width: 100px; max-width: 200px; margin: 0 4px; }
            #customerArea { max-width: 150px; gap: 4px; padding-left: 4px; padding-right: 2px; }
            #customerArea span { font-size: 0.75rem; max-width: 80px; }
            #customerArea button { padding: 4px 6px; font-size: 0.7rem; }

            /* On small screens hide full nav-links and show hamburger menu */
            .nav-links { display: none; }
            .hamburger { display: block; }
            
            /* Reposition floating icons to a tidy vertical stack on the right */
            .notif-icon { bottom: 200px; width: 44px; height: 44px; right: 12px; }
            .chat-widget { bottom: 135px; width: 44px; height: 44px; right: 12px; }
            .cart-icon { bottom: 30px; width: 52px; height: 52px; right: 12px; }
            .notif-icon i, .chat-widget i, .cart-icon i { font-size: 1.05rem; }

            /* Move the bottom action bar up so it doesn't overlap cart icon */
            .bottom-nav { bottom: 105px; padding: 7px 10px; }
            .bottom-nav .admin-link, .bottom-nav .btn-primary { padding: 6px 10px; font-size: 0.9rem; }
        }

        /* Better intermediate breakpoint for tablets */
        @media (max-width: 900px) {
            .nav-container { padding: 0 12px; }
            .search-wrapper { flex: 1 1 auto; min-width: 160px; }
            .nav-links { gap: 10px; }
            .nav-links a, .nav-links .admin-link, .nav-links .btn { font-size: 1rem; }
            #customerArea span { font-size: 0.9rem; max-width: 140px; }
            #customerArea button { padding: 5px 10px; font-size: 0.85rem; }
        }

        /* Laptop screens - Adjust customer area for space */
        @media (min-width: 769px) and (max-width: 1200px) {
            #customerArea span { max-width: 150px; font-size: 0.9rem; }
            #customerArea button { padding: 5px 10px; font-size: 0.85rem; }
        }

        @media (min-width: 769px) and (max-width: 1100px) {
            #customerArea span { max-width: 120px; font-size: 0.85rem; }
        }

        /* Tablet and small screens */
        @media (max-width: 480px) {
            .nav-container { padding: 0 8px; gap: 6px; }
            .logo img { height: 36px; }
            .search-wrapper { min-width: 120px; margin: 0 4px; }
            #siteSearch { padding: 8px 42px 8px 38px; font-size: 0.9rem; }
            .search-wrapper .search-icon { left: 10px; font-size: 0.9rem; }
            #voiceBtn { width: 36px; height: 36px; right: 4px; }
            #voiceBtn i { font-size: 0.9rem; }
            
            /* Extra spacing for very small screens */
            .notif-icon { bottom: 210px; width: 42px; height: 42px; }
            .chat-widget { bottom: 140px; width: 42px; height: 42px; }
            .cart-icon { bottom: 25px; width: 50px; height: 50px; }
            .bottom-nav { bottom: 110px; padding: 6px 8px; }
            .bottom-nav .loyalty { padding: 5px 8px; font-size: 0.85rem; }
        }

        /* Ensure nav doesn't shift due to overflow; allow horizontal scrolling inside nav-links if needed */
        .nav-container { overflow: visible; }
        .nav-links { overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .nav-links::-webkit-scrollbar { height: 6px; }
        .nav-links::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.12); border-radius: 3px; }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            font-family: 'Playfair Display', serif;
            color: var(--primary);
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-radius: 50px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .nav-links {
            display: flex;
            gap: 7px;
        }

        .nav-links a {
            font-size: 1.05rem;
            font-weight: 600;
            transition: var(--transition);
            position: relative;
            padding: 6px 12px;
            display: inline-block;
            border-radius: 50px;
        }

        .nav-links a::after {
            display: none;
        }

        .nav-links a:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        .admin-link {
            background: var(--primary);
            color: var(--dark);
            padding: 6px 12px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            font-size: 1.05rem;
            transition: var(--transition);
        }

        .admin-link:hover {
            background: var(--primary-hover);
            color: var(--dark);
        }

        .admin-link::after {
            display: none;
        }

        /* Hide top Admin/Book buttons (we'll show them in a fixed bottom bar) */
        .nav-links .admin-link,
        .nav-links .btn-primary {
            display: none;
        }

        /* Bottom fixed navbar for loyalty/admin/book actions */
        .bottom-nav {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            bottom: 18px;
            background: rgba(15,15,15,0.85);
            padding: 10px 14px;
            border-radius: 999px;
            display: flex;
            gap: 10px;
            align-items: center;
            z-index: 1200;
            box-shadow: 0 10px 30px rgba(0,0,0,0.6);
            backdrop-filter: blur(6px);
        }

        .bottom-nav .admin-link {
            padding: 8px 12px;
            border-radius: 999px;
            background: var(--primary);
            color: var(--dark);
            font-weight: 700;
            border: none;
        }

        .bottom-nav .btn-primary {
            padding: 8px 12px;
            border-radius: 999px;
            background: var(--gradient);
            color: var(--dark);
            font-weight: 700;
            border: none;
        }

        .bottom-nav .loyalty {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 10px;
            border-radius: 999px;
            background: linear-gradient(135deg,#667eea,#764ba2);
            color: #fff;
            font-weight: 600;
        }

        /* Fingerprint button styles */
        #fingerprintBtn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        #registerBtn i, #fingerprintBtn i {
            margin-right: 8px;
        }

        /* Admin Panel Responsive Styles */
        .admin-panel {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .admin-panel h2 {
            font-size: 2rem;
            margin-bottom: 30px;
        }

        .admin-panel .btn {
            margin: 5px;
            min-width: 120px;
        }

        .admin-panel table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
            font-size: 0.95rem;
            background: transparent;
            border-radius: 12px;
            overflow: hidden;
        }

        .admin-panel th, .admin-panel td {
            padding: 12px 10px;
            text-align: left;
            border: none;
        }

        .admin-panel th {
            background: var(--primary);
            color: var(--dark);
            font-weight: 700;
            border-right: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 2;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .admin-panel th:last-child {
            border-right: none;
        }
        .admin-panel tr:nth-child(even) {
            background: rgba(255,255,255,0.01);
        }
        .admin-panel tr:hover {
            background: rgba(212, 175, 55, 0.04);
        }

        .admin-panel tr:nth-child(even) {
            background: #f9f9f9;
        }

        .admin-panel tr:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        /* Desktop responsive adjustments */
        @media (min-width: 768px) {
            .admin-panel {
                padding: 30px;
            }
            
            .admin-panel h2 {
                font-size: 2.5rem;
            }
            
            .admin-panel table {
                font-size: 1rem;
            }
            
            .admin-panel th, .admin-panel td {
                padding: 15px;
            }
        }

        .hamburger {
            display: none;
            cursor: pointer;
            font-size: 1.5rem;
        }

        /* --- HERO SECTION --- */
        #home {
            height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding-top: 80px;
        }

        .hero-content {
            animation: fadeIn 1.5s ease-out;
        }

        .hero-content h1 {
            font-size: 5rem;
            margin-bottom: 20px;
            line-height: 1.1;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #ddd;
        }

        .highlight { color: var(--primary); }

        /* --- ABOUT SECTION --- */
        #about {
            background: #121212;
        }

        .about-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: center;
        }

        .about-img {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .about-text h3 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        /* --- MENU SECTION --- */
        #menu {
            background: #0f0f0f;
        }

        .menu-filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            border: 1px solid var(--glass-border);
            background: var(--glass);
            color: #fff;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-btn.active, .filter-btn:hover {
            background: var(--primary);
            color: var(--dark);
            border-color: var(--primary);
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .menu-item {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            overflow: hidden;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            opacity: 0; /* JS handles fade in */
            animation: slideUp 0.5s ease forwards;
        }

        .menu-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
            border-color: var(--primary);
        }

        .menu-img {
            height: 200px;
            object-fit: cover;
        }

        .menu-details {
            padding: 20px;
        }

        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .menu-title { font-size: 1.2rem; font-weight: 600; }
        .menu-price { color: var(--primary); font-weight: 700; font-size: 1.2rem; }
        .menu-desc { color: #aaa; font-size: 0.9rem; }

        /* --- WEATHER SPECIALS --- */
        #weather-specials {
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
            padding: 80px 0;
            position: relative;
            overflow: hidden;
        }
        
        #weather-specials::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(212, 175, 55, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }
        
        .weather-card {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.05) 0%, rgba(15, 15, 15, 0.8) 100%);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 40px;
            backdrop-filter: blur(20px);
            display: flex;
            gap: 40px;
            align-items: center;
            flex-wrap: wrap;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
            transition: var(--transition);
        }
        
        .weather-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 70px rgba(212, 175, 55, 0.2);
        }
        
        .weather-info {
            flex: 1;
            min-width: 280px;
            text-align: center;
            padding: 20px;
            background: rgba(212, 175, 55, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        .weather-icon {
            font-size: 5rem;
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(212, 175, 55, 0.3));
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .temperature {
            font-size: 3rem;
            font-weight: 700;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(212, 175, 55, 0.5);
        }
        
        .weather-desc {
            color: #ddd;
            margin-top: 8px;
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .weather-location {
            color: var(--primary);
            margin-top: 12px;
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
        }
        
        .special-recommendation {
            flex: 2;
            min-width: 320px;
        }
        
        .special-recommendation h3 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .special-dish {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }
        
        .special-dish::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }
        
        .special-dish:hover {
            transform: translateX(5px);
            box-shadow: -5px 0 20px rgba(212, 175, 55, 0.2);
        }
        
        .special-dish h4 {
            font-size: 1.5rem;
            margin-bottom: 12px;
            color: var(--light);
            font-weight: 600;
        }
        
        .special-dish p {
            color: #ccc;
            line-height: 1.9;
            font-size: 1rem;
        }
        
        @media (max-width: 768px) {
            .weather-card {
                padding: 25px;
                gap: 25px;
                flex-direction: column;
            }
            .weather-info {
                min-width: 100%;
            }
            .weather-icon {
                font-size: 4rem;
            }
            .temperature {
                font-size: 2.5rem;
            }
            .special-recommendation {
                min-width: 100%;
            }
            .special-recommendation h3 {
                font-size: 1.5rem;
            }
            .special-dish {
                padding: 20px;
            }
            .special-dish h4 {
                font-size: 1.3rem;
            }
        }
        
        @media (max-width: 480px) {
            .weather-card {
                padding: 20px;
                gap: 20px;
                border-radius: 15px;
            }
            .weather-info {
                padding: 15px;
            }
            .weather-icon {
                font-size: 3rem;
            }
            .temperature {
                font-size: 2rem;
            }
            .weather-desc {
                font-size: 1rem;
            }
            .weather-location {
                font-size: 0.85rem;
            }
            .special-recommendation h3 {
                font-size: 1.3rem;
                flex-wrap: wrap;
            }
            .special-dish {
                padding: 15px;
            }
            .special-dish h4 {
                font-size: 1.1rem;
            }
            .special-dish p {
                font-size: 0.9rem;
            }
        }

        /* --- ONLINE ORDERING --- */
        .order-btn {
            background: var(--primary);
            color: var(--dark);
            border: none;
            padding: 8px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: var(--transition);
            margin-top: 10px;
        }
        
        .order-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
        
        /* Cart Icon */
        .cart-icon {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
            z-index: 1000;
            transition: var(--transition);
        }
        
        .cart-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.6);
        }
        
        .cart-icon i {
            font-size: 1.5rem;
            color: var(--dark);
        }
        
        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4444;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
        }

        /* Footer credit */
        footer { padding: 40px 0 24px; }
        footer .dev-credit { margin-top: 8px; color: #cfcfcf; font-size: 0.95rem; }
        footer .dev-credit .heart { color: var(--primary); margin-left: 6px; }

        /* Notification Bell */
        .notif-icon {
            position: fixed;
            bottom: 180px;
            right: 30px;
            width: 48px;
            height: 48px;
            background: var(--dark);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0,0,0,0.6);
            z-index: 1000;
            transition: var(--transition);
        }

        .notif-icon i { color: var(--primary); font-size: 1.2rem; }

        .notif-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #d9534f;
            color: white;
            min-width: 20px;
            height: 20px;
            padding: 0 6px;
            border-radius: 999px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
        }
        
        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100%;
            background: var(--dark-glass);
            backdrop-filter: blur(20px);
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
            z-index: 2000;
            transition: right 0.3s ease;
            overflow-y: auto;
        }
        
        .cart-sidebar.active {
            right: 0;
        }
        
        .cart-header {
            padding: 20px;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(212, 175, 55, 0.1);
        }
        
        .cart-header h2 {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .close-cart {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .close-cart:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }
        
        .cart-items {
            padding: 20px;
        }
        
        .cart-item {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            gap: 15px;
        }
        
        .cart-item-img {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            color: var(--primary);
            font-weight: 700;
        }
        
        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .qty-btn {
            background: var(--primary);
            color: var(--dark);
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: 700;
            transition: var(--transition);
        }
        
        .qty-btn:hover {
            background: var(--primary-hover);
        }
        
        .qty-display {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }
        
        .remove-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85rem;
            margin-left: auto;
            transition: var(--transition);
        }
        
        .remove-btn:hover {
            background: #cc0000;
        }
        
        .cart-empty {
            text-align: center;
            padding: 50px 20px;
            color: #aaa;
        }
        
        .cart-empty i {
            font-size: 4rem;
            color: var(--glass-border);
            margin-bottom: 20px;
        }
        
        .cart-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--dark-glass);
            border-top: 1px solid var(--glass-border);
            padding: 20px;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .cart-total-price {
            color: var(--primary);
        }
        
        .checkout-btn {
            width: 100%;
            background: var(--gradient);
            color: var(--dark);
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
        }
        
        /* --- UPI PAYMENT MODAL --- */
        .upi-modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            backdrop-filter: blur(10px);
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .upi-modal.show {
            display: flex;
            opacity: 1;
        }

        .upi-modal-content {
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 480px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 2px solid var(--primary);
            transform: scale(0.7);
            transition: transform 0.3s ease;
            text-align: center;
        }

        .upi-modal.show .upi-modal-content { 
            transform: scale(1); 
        }

        .upi-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.8rem;
            cursor: pointer;
            color: #fff;
            transition: var(--transition);
            z-index: 10;
        }

        .upi-close:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }

        .upi-header {
            margin-bottom: 20px;
        }

        .upi-header h2 {
            color: var(--primary);
            font-size: 1.6rem;
            margin-bottom: 8px;
        }

        .upi-amount {
            font-size: 2rem;
            font-weight: 700;
            color: var(--light);
            margin-bottom: 15px;
        }

        .upi-qr-container {
            background: white;
            padding: 15px;
            border-radius: 12px;
            margin: 15px auto;
            max-width: 220px;
            display: inline-block;
        }

        .upi-qr-code {
            width: 180px;
            height: 180px;
            margin: 0 auto;
            display: block;
        }

        .upi-id-display {
            background: var(--glass);
            border: 1px solid var(--primary);
            padding: 12px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 1rem;
            color: var(--primary);
            word-break: break-all;
        }

        .upi-apps {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 15px 0;
        }

        .upi-app-btn {
            background: var(--glass);
            border: 2px solid var(--glass-border);
            padding: 10px 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }

        .upi-app-btn:hover {
            border-color: var(--primary);
            background: rgba(212, 175, 55, 0.1);
            transform: translateY(-3px);
        }

        .upi-copy-btn {
            background: var(--gradient);
            color: var(--dark);
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin: 8px 5px;
            font-size: 0.9rem;
        }

        .upi-copy-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }

        .payment-instructions {
            background: rgba(212, 175, 55, 0.1);
            border-left: 4px solid var(--primary);
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: left;
        }

        .payment-instructions h4 {
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .payment-instructions ol {
            margin-left: 18px;
            color: #ccc;
            line-height: 1.6;
            font-size: 0.85rem;
        }
        
        /* UPI Modal checkout button */
        .upi-modal-content .checkout-btn {
            margin-top: 10px;
            padding: 12px;
            font-size: 1rem;
        }
        
        @media (max-width: 768px) {
            .upi-modal-content {
                padding: 20px;
                width: 95%;
                max-height: 92vh;
            }
            
            .upi-header h2 {
                font-size: 1.4rem;
            }
            
            .upi-amount {
                font-size: 1.8rem;
            }
            
            .upi-qr-container {
                padding: 12px;
                max-width: 200px;
            }
            
            .upi-qr-code {
                width: 160px !important;
                height: 160px !important;
            }
            
            .upi-apps {
                gap: 8px;
            }
            
            .upi-app-btn {
                padding: 8px 14px;
                font-size: 0.85rem;
            }
            
            .payment-instructions {
                padding: 10px;
            }
            
            .payment-instructions h4 {
                font-size: 0.9rem;
            }
            
            .payment-instructions ol {
                font-size: 0.8rem;
                margin-left: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .upi-modal-content {
                padding: 15px;
                max-height: 95vh;
                border-radius: 15px;
            }
            
            .upi-close {
                top: 8px;
                right: 12px;
                font-size: 1.5rem;
            }
            
            .upi-header {
                margin-bottom: 12px;
            }
            
            .upi-header h2 {
                font-size: 1.2rem;
            }
            
            .upi-amount {
                font-size: 1.5rem;
                margin-bottom: 10px;
            }
            
            .upi-qr-container {
                padding: 10px;
                max-width: 170px;
            }
            
            .upi-qr-code {
                width: 140px !important;
                height: 140px !important;
            }
            
            .upi-id-display {
                padding: 8px;
                font-size: 0.85rem;
                margin: 10px 0;
            }
            
            .upi-copy-btn {
                padding: 8px 18px;
                font-size: 0.85rem;
            }
            
            .upi-apps {
                flex-direction: column;
                gap: 6px;
                margin: 10px 0;
            }
            
            .upi-app-btn {
                width: 100%;
                justify-content: center;
                padding: 10px;
            }
            
            .payment-instructions {
                margin: 10px 0;
                padding: 8px;
            }
            
            .payment-instructions ol {
                line-height: 1.5;
            }
            
            .upi-modal-content .checkout-btn {
                padding: 10px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
        }

        /* --- LIVE CHAT WIDGET --- */
        .chat-widget {
            position: fixed;
            bottom: 120px;
            right: 30px;
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(37, 211, 102, 0.45);
            z-index: 1000;
            transition: var(--transition);
        }
        
        .chat-widget:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 22px rgba(37, 211, 102, 0.55);
        }
        
        .chat-widget i {
            font-size: 1.2rem;
            color: white;
        }

        /* --- LOYALTY BADGE --- */
        .loyalty-badge {
            position: fixed;
            top: 100px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 12px 20px;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            z-index: 900;
            cursor: pointer;
            transition: var(--transition);
            display: none;
        }
        
        .loyalty-badge:hover {
            transform: translateY(-3px);
        }
        
        .loyalty-badge i {
            margin-right: 5px;
        }

        /* --- MEET OUR CHEFS SECTION --- */
        #our-chefs {
            background: #121212;
        }
        
        .chefs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }
        
        .chef-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            overflow: hidden;
            transition: var(--transition);
            text-align: center;
        }
        
        .chef-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.2);
            border-color: var(--primary);
        }
        
        .chef-img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            filter: grayscale(20%);
            transition: var(--transition);
        }
        
        .chef-card:hover .chef-img {
            filter: grayscale(0%);
        }
        
        .chef-info {
            padding: 25px;
        }
        
        .chef-info h3 {
            font-size: 1.4rem;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .chef-role {
            color: #888;
            font-size: 0.95rem;
            margin-bottom: 15px;
        }
        
        .chef-bio {
            color: #bbb;
            font-size: 0.9rem;
            line-height: 1.7;
            margin-bottom: 15px;
        }
        
        .chef-social {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .chef-social a {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            transition: var(--transition);
        }
        
        .chef-social a:hover {
            background: var(--primary);
            color: var(--dark);
            transform: translateY(-3px);
        }

        /* --- PRIVATE EVENTS SECTION --- */
        #private-events {
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), 
                        url('https://images.unsplash.com/photo-1519671482749-fd09be7ccebf?q=80&w=2070&auto=format&fit=crop') center/cover fixed;
        }
        
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .event-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 35px;
            text-align: center;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        
        .event-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }
        
        .event-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }
        
        .event-card h3 {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .event-card p {
            color: #bbb;
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 20px;
        }
        
        .event-features {
            text-align: left;
            margin-bottom: 20px;
        }
        
        .event-features li {
            color: #ccc;
            padding: 8px 0;
            border-bottom: 1px solid var(--glass-border);
            font-size: 0.9rem;
        }
        
        .event-features li:last-child {
            border-bottom: none;
        }
        
        .event-features li i {
            color: var(--primary);
            margin-right: 10px;
        }

        /* --- AWARDS SECTION --- */
        #awards {
            background: #0f0f0f;
        }
        
        .awards-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 40px;
        }
        
        .award-item {
            text-align: center;
            padding: 30px;
            transition: var(--transition);
        }
        
        .award-item:hover {
            transform: scale(1.05);
        }
        
        .award-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2) 0%, rgba(212, 175, 55, 0.05) 100%);
            border: 2px solid var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }
        
        .award-item h4 {
            color: var(--primary);
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        
        .award-item p {
            color: #888;
            font-size: 0.9rem;
        }

        /* --- FAQ SECTION --- */
        #faq {
            background: #121212;
        }
        
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .faq-item {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: var(--transition);
        }
        
        .faq-item:hover {
            border-color: var(--primary);
        }
        
        .faq-question {
            padding: 20px 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--light);
            transition: var(--transition);
        }
        
        .faq-question:hover {
            color: var(--primary);
        }
        
        .faq-question i {
            color: var(--primary);
            transition: var(--transition);
        }
        
        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .faq-answer-content {
            padding: 0 25px 20px;
            color: #aaa;
            line-height: 1.8;
        }
        
        .faq-item.active .faq-answer {
            max-height: 300px;
        }

        /* --- SIGNATURE DISHES SECTION --- */
        #signature-dishes {
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
            position: relative;
            overflow: hidden;
        }
        
        #signature-dishes::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.03) 0%, transparent 50%);
            animation: rotate 30s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .signature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            position: relative;
            z-index: 1;
        }
        
        .signature-card {
            display: flex;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            overflow: hidden;
            transition: var(--transition);
        }
        
        .signature-card:hover {
            transform: translateX(10px);
            border-color: var(--primary);
            box-shadow: -10px 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .signature-img {
            width: 150px;
            min-height: 180px;
            object-fit: cover;
        }
        
        .signature-content {
            padding: 25px;
            flex: 1;
        }
        
        .signature-badge {
            display: inline-block;
            background: var(--gradient);
            color: var(--dark);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .signature-content h3 {
            font-size: 1.3rem;
            color: var(--light);
            margin-bottom: 10px;
        }
        
        .signature-content p {
            color: #aaa;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .signature-price {
            font-size: 1.4rem;
            color: var(--primary);
            font-weight: 700;
        }

        /* --- NEWSLETTER SECTION --- */
        #newsletter {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(15, 15, 15, 0.9) 100%);
            padding: 60px 0;
            text-align: center;
        }
        
        .newsletter-box {
            max-width: 600px;
            margin: 0 auto;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 40px;
            backdrop-filter: blur(10px);
        }
        
        .newsletter-box h3 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .newsletter-box p {
            color: #ccc;
            margin-bottom: 25px;
        }
        
        .newsletter-form {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .newsletter-input {
            flex: 1;
            min-width: 250px;
            padding: 15px 20px;
            border: 2px solid var(--glass-border);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50px;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: var(--transition);
        }
        
        .newsletter-input:focus {
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .newsletter-btn {
            padding: 15px 40px;
            background: var(--gradient);
            color: var(--dark);
            border: none;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .newsletter-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
        }

        /* --- INTERACTIVE MAP SECTION --- */
        #location-map {
            background: #0f0f0f;
            padding: 80px 0;
        }
        
        .map-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
        }
        
        .map-info h3 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .map-details {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .map-details i {
            color: var(--primary);
            margin-right: 15px;
            font-size: 1.2rem;
        }
        
        .map-details p {
            color: #ccc;
            line-height: 2;
        }
        
        .map-frame {
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            height: 400px;
            background: var(--glass);
            border: 2px solid var(--glass-border);
        }
        
        @media (max-width: 768px) {
            .map-container {
                grid-template-columns: 1fr;
            }
            .newsletter-form {
                flex-direction: column;
            }
        }

        /* --- GALLERY --- */
        #gallery { background: #121212; }
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            height: 250px;
            cursor: pointer;
        }
        .gallery-item img {
            height: 100%;
            width: 100%;
            object-fit: cover;
            transition: var(--transition);
        }
        .gallery-item:hover img { transform: scale(1.1); }

        /* --- TESTIMONIALS --- */
        #testimonials { background: #0f0f0f; }
        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        .testimonial-card {
            background: var(--glass);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--glass-border);
        }
        .stars { color: var(--primary); margin-bottom: 15px; }
        .quote { font-style: italic; color: #ddd; margin-bottom: 20px; }
        .client-name { font-weight: 600; color: var(--primary); }

        /* --- CONTACT --- */
        #contact {
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1552566626-52f8b828add9?q=80&w=2070&auto=format&fit=crop') center/cover;
        }
        
        .contact-container {
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(15px);
            padding: 50px;
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            max-width: 800px;
            margin: 0 auto;
        }

        .form-group { margin-bottom: 20px; }
        
        .form-control {
            width: 100%;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 5px;
            color: white;
            font-family: inherit;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.15);
        }

        /* --- FOOTER --- */
        footer {
            background: #050505;
            padding: 50px 0 20px;
            text-align: center;
        }
        
        .footer-logo { font-size: 2rem; color: var(--primary); font-family: 'Playfair Display'; margin-bottom: 20px; }
        .social-links { margin-bottom: 20px; }
        .social-links a {
            font-size: 1.2rem;
            color: #fff;
            margin: 0 10px;
            transition: var(--transition);
        }
        .social-links a:hover { color: var(--primary); }

        /* --- MODAL --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        /* Fullscreen admin modal variant */
        .modal.admin-full {
            align-items: stretch;
        }

        .modal.admin-full .modal-content {
            width: 100%;
            max-width: none;
            height: 100%;
            border-radius: 0;
            padding: 28px;
            box-shadow: none;
            overflow-y: auto;
        }

        /* Admin panel layout inside fullscreen modal */
        .admin-panel-header h2 { font-size: 1.6rem; }
        .admin-grid .admin-left { }
        .admin-grid .admin-right { }
        .admin-table tbody tr { border-bottom: 1px solid rgba(255,255,255,0.04); }
        .admin-table tbody tr td { padding: 10px 8px; }
        .admin-table thead th { padding: 10px 8px; }

        .modal-content {
            background: var(--dark-glass);
            padding: 40px;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            position: relative;
            border: 1px solid var(--glass-border);
            transform: scale(0.7);
            transition: transform 0.3s ease;
        }

        .modal.show .modal-content { transform: scale(1); }

        /* Premium Login Modal Styles - Matching admin-login.html */
        .premium-login-modal {
            max-width: 450px !important;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 50px 40px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideUpLogin 0.6s ease-out;
        }

        @keyframes slideUpLogin {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(30px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .login-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .login-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #d4af37, #f3e5ab);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.4);
        }

        .login-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            background: linear-gradient(135deg, #d4af37, #f3e5ab);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .login-subtitle {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.95rem;
            font-weight: 300;
        }

        .premium-form-group {
            margin-bottom: 25px;
            position: relative;
        }

        .premium-form-group label {
            display: block;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .premium-form-group input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            box-sizing: border-box;
        }

        .premium-form-group input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.12);
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .premium-form-group input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .premium-login-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #d4af37, #f3e5ab);
            border: none;
            border-radius: 12px;
            color: #0f0f0f;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.3);
            margin-top: 10px;
        }

        .premium-login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(212, 175, 55, 0.5);
        }

        .premium-login-btn:active {
            transform: translateY(0);
        }

        .login-footer {
            text-align: center;
            margin-top: 25px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
        }

        .login-footer a {
            color: #d4af37;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .login-footer a:hover {
            color: #f3e5ab;
        }

        .credentials-info-customer {
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
            text-align: center;
        }

        .credentials-info-customer p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .credentials-info-customer .cred-text {
            color: var(--primary);
            font-size: 0.9rem;
            font-family: 'Courier New', monospace;
            background: rgba(255, 255, 255, 0.05);
            padding: 6px 12px;
            border-radius: 6px;
            display: inline-block;
            margin: 3px 0;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #fff;
        }

        /* --- ANIMATIONS --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- RESPONSIVE --- */
        
        /* Large Tablets and Small Desktops */
        @media (max-width: 1024px) {
            .container {
                padding: 0 30px;
            }
            
            .section-title h2 {
                font-size: 2.5rem;
            }
            
            .hero-content h1 {
                font-size: 4rem;
            }
            
            .about-grid {
                gap: 30px;
            }
            
            .about-text h3 {
                font-size: 2rem;
            }
            
            .menu-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
            
            .testimonials-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .gallery-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }
        
        /* Tablets */
        @media (max-width: 768px) {
            section {
                padding: 60px 0;
            }
            
            .container {
                padding: 0 20px;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .section-title p {
                font-size: 1rem;
            }
            
            /* Navigation */
            .hamburger { 
                display: block; 
            }

            /* Ensure searchbar can expand on mobile and logo/hamburger don't squeeze it */
            .nav-container { align-items: center; gap: 8px; }
            .logo { flex: 0 0 auto; max-width: 45%; }
            .logo img { height: 48px; }
            .search-wrapper { order: 2; flex: 1 1 auto; min-width: 0; max-width: none; margin: 0 8px; }
            #siteSearch { width: 100%; }
            .hamburger { order: 3; flex: 0 0 auto; }
            
            .nav-links {
                position: absolute;
                top: 70px;
                left: 0;
                width: 100%;
                background: #0f0f0f;
                flex-direction: column;
                padding: 0;
                gap: 0;
                text-align: center;
                height: 0;
                overflow: hidden;
                transition: height 0.3s ease;
                z-index: 1000;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            }

            .nav-links.active {
                height: auto;
                padding: 20px 0;
                border-bottom: 2px solid var(--primary);
            }
            
            .nav-links li {
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .nav-links li:last-child {
                border-bottom: none;
            }
            
            .nav-links a {
                font-size: 1.1rem;
                padding: 15px 20px;
                display: block;
                transition: var(--transition);
            }
            
            .nav-links a:hover {
                background: rgba(212, 175, 55, 0.1);
                color: var(--primary);
            }
            
            .nav-links a.active {
                background: rgba(212, 175, 55, 0.15);
                color: var(--primary);
                border-left: 4px solid var(--primary);
            }
            
            .nav-links a::after {
                display: none;
            }
            
            .nav-links .btn {
                margin: 15px 20px;
                display: inline-block;
            }
            
            /* Hero */
            #home {
                padding-top: 60px;
            }
            
            .hero-content h1 { 
                font-size: 2.8rem;
                line-height: 1.2;
            }
            
            .hero-content h4 {
                font-size: 0.9rem;
            }
            
            .hero-content p {
                font-size: 1rem;
                padding: 0 10px;
            }
            
            .hero-content .btn {
                display: block;
                margin: 10px auto;
                width: 80%;
                max-width: 250px;
            }
            
            .hero-content .btn-outline {
                margin-left: auto !important;
            }
            
            /* About */
            .about-grid { 
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .about-text {
                text-align: center;
            }
            
            .about-text h3 {
                font-size: 1.8rem;
            }
            
            .about-text > div {
                justify-content: center;
            }
            
            /* Menu */
            .menu-filters {
                gap: 10px;
            }
            
            .filter-btn {
                padding: 6px 15px;
                font-size: 0.9rem;
            }
            
            .menu-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 20px;
            }
            
            .menu-img {
                height: 180px;
            }
            
            .menu-details {
                padding: 15px;
            }
            
            .menu-title {
                font-size: 1.1rem;
            }
            
            /* Gallery */
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .gallery-item {
                height: 200px;
            }
            
            /* Testimonials */
            .testimonials-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .testimonial-card {
                padding: 25px;
            }
            
            .quote {
                font-size: 0.95rem;
            }
            
            /* Contact */
            .contact-container {
                padding: 30px 20px;
            }
            
            .form-control {
                padding: 12px;
            }
            
            /* Footer */
            footer {
                padding: 40px 0 15px;
            }
            
            .footer-logo {
                font-size: 1.8rem;
            }
            
            /* Fixed Elements */
            .cart-icon {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
            }
            
            .cart-icon i {
                font-size: 1.2rem;
            }
            
            .cart-badge {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
            
            .chat-widget {
                width: 48px;
                height: 48px;
                bottom: 100px;
                right: 15px;
            }
            
            .chat-widget i {
                font-size: 1.2rem;
            }
            
            .loyalty-badge {
                top: 80px;
                right: 15px;
                padding: 8px 15px;
                font-size: 0.8rem;
            }
            
            /* Cart Sidebar */
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
            
            .cart-header {
                padding: 15px;
            }
            
            .cart-header h2 {
                font-size: 1.3rem;
            }
            
            .cart-item {
                padding: 12px;
            }
            
            .cart-item-img {
                width: 60px;
                height: 60px;
            }
            
            .cart-item-name {
                font-size: 0.9rem;
            }
            
            .cart-footer {
                padding: 15px;
            }
            
            .cart-total {
                font-size: 1.1rem;
            }
            
            /* Chef Banner */
            .chef-special-banner {
                padding: 12px 10px;
                font-size: 0.85rem;
            }
            
            .special-offer-timer {
                display: block;
                margin: 8px auto 0;
            }
            
            /* New Sections Responsive */
            .chefs-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .chef-img {
                height: 250px;
            }
            
            .chef-info {
                padding: 20px;
            }
            
            .chef-info h3 {
                font-size: 1.2rem;
            }
            
            .signature-grid {
                grid-template-columns: 1fr;
            }
            
            .signature-card {
                flex-direction: column;
            }
            
            .signature-img {
                width: 100%;
                height: 200px;
            }
            
            .events-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .event-card {
                padding: 25px;
            }
            
            .event-icon {
                font-size: 2.5rem;
            }
            
            .awards-container {
                gap: 25px;
            }
            
            .award-item {
                padding: 20px;
            }
            
            .award-icon {
                width: 80px;
                height: 80px;
                font-size: 2rem;
            }
            
            .faq-question {
                padding: 18px 20px;
                font-size: 0.95rem;
            }
            
            /* Modal */
            .modal-content {
                padding: 30px 20px;
                width: 95%;
            }
        }
        
        /* Mobile Phones */
        @media (max-width: 576px) {
            section {
                padding: 50px 0;
            }
            
            .container {
                padding: 0 15px;
            }
            
            .section-title {
                margin-bottom: 2rem;
            }
            
            .section-title h2 {
                font-size: 1.8rem;
            }
            
            .section-title p {
                font-size: 0.9rem;
            }
            
            .btn {
                padding: 10px 25px;
                font-size: 0.85rem;
            }
            
            /* Navigation */
            .logo {
                font-size: 1.5rem;
            }
            
            .nav-links a {
                padding: 12px 15px;
                font-size: 1rem;
            }
            
            /* Hero */
            .hero-content h1 {
                font-size: 2.2rem;
            }
            
            .hero-content h4 {
                font-size: 0.8rem;
                letter-spacing: 1px;
            }
            
            .hero-content p {
                font-size: 0.9rem;
            }
            
            .hero-content .btn {
                width: 90%;
                padding: 12px 20px;
            }
            
            /* About */
            .about-text h3 {
                font-size: 1.5rem;
            }
            
            .about-text p {
                font-size: 0.9rem;
            }
            
            .about-text > div {
                flex-direction: column;
                gap: 15px;
            }
            
            .about-text > div h2 {
                font-size: 1.8rem;
            }
            
            /* Menu */
            .menu-filters {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .filter-btn {
                padding: 5px 12px;
                font-size: 0.8rem;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .menu-item {
                border-radius: 12px;
            }
            
            .menu-img {
                height: 200px;
            }
            
            .menu-details {
                padding: 12px;
            }
            
            .menu-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .menu-title {
                font-size: 1rem;
            }
            
            .menu-price {
                font-size: 1.1rem;
            }
            
            .menu-desc {
                font-size: 0.85rem;
            }
            
            .order-btn {
                width: 100%;
                padding: 10px;
                margin-top: 12px;
            }
            
            /* Gallery */
            .gallery-grid {
                grid-template-columns: 1fr;
            }
            
            .gallery-item {
                height: 220px;
            }
            
            /* Testimonials */
            .testimonial-card {
                padding: 20px 15px;
            }
            
            .quote {
                font-size: 0.9rem;
                line-height: 1.7;
            }
            
            /* Newsletter */
            .newsletter-box {
                padding: 25px 15px;
            }
            
            .newsletter-box h3 {
                font-size: 1.5rem;
            }
            
            .newsletter-box p {
                font-size: 0.9rem;
            }
            
            .newsletter-form {
                flex-direction: column;
            }
            
            .newsletter-input {
                min-width: auto;
                width: 100%;
            }
            
            .newsletter-btn {
                width: 100%;
                padding: 12px;
            }
            
            /* Map Section */
            .map-container {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .map-info h3 {
                font-size: 1.5rem;
            }
            
            .map-details {
                padding: 15px;
            }
            
            .map-details p {
                font-size: 0.9rem;
            }
            
            .map-frame {
                height: 300px;
            }
            
            /* Contact */
            .contact-container {
                padding: 25px 15px;
            }
            
            .form-control {
                padding: 10px;
                font-size: 0.9rem;
            }
            
            /* Footer */
            .footer-logo {
                font-size: 1.5rem;
            }
            
            footer p {
                font-size: 0.85rem;
            }
            
            .social-links a {
                font-size: 1.1rem;
                margin: 0 8px;
            }
            
            /* Fixed Elements */
            .cart-icon {
                width: 45px;
                height: 45px;
                bottom: 15px;
                right: 15px;
            }
            
            .chat-widget {
                width: 48px;
                height: 48px;
                bottom: 110px;
                right: 10px;
            }
            
            .chat-widget i {
                font-size: 1.2rem;
            }
            
            .loyalty-badge {
                top: 70px;
                right: 10px;
                padding: 6px 12px;
                font-size: 0.75rem;
            }
            
            /* Cart Items */
            .cart-items {
                padding: 15px;
                padding-bottom: 180px;
            }
            
            .cart-item {
                flex-direction: column;
                text-align: center;
            }
            
            .cart-item-img {
                width: 100%;
                height: 120px;
                border-radius: 8px;
            }
            
            .cart-item-controls {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .remove-btn {
                margin: 10px 0 0 0;
                width: 100%;
            }
            
            /* Chef Banner */
            .chef-special-banner {
                padding: 10px;
                font-size: 0.8rem;
            }
            
            /* New Sections Mobile */
            .chefs-grid {
                grid-template-columns: 1fr;
            }
            
            .chef-img {
                height: 280px;
            }
            
            .chef-bio {
                font-size: 0.85rem;
            }
            
            .chef-social a {
                width: 35px;
                height: 35px;
            }
            
            .signature-content {
                padding: 20px;
            }
            
            .signature-content h3 {
                font-size: 1.1rem;
            }
            
            .signature-price {
                font-size: 1.2rem;
            }
            
            .events-grid {
                grid-template-columns: 1fr;
            }
            
            .event-card {
                padding: 20px;
            }
            
            .event-card h3 {
                font-size: 1.3rem;
            }
            
            .event-features li {
                font-size: 0.85rem;
            }
            
            .awards-container {
                gap: 15px;
            }
            
            .award-item {
                padding: 15px;
                width: calc(50% - 10px);
            }
            
            .award-icon {
                width: 70px;
                height: 70px;
                font-size: 1.8rem;
            }
            
            .award-item h4 {
                font-size: 1rem;
            }
            
            .award-item p {
                font-size: 0.8rem;
            }
            
            .faq-question {
                padding: 15px;
                font-size: 0.9rem;
            }
            
            .faq-answer-content {
                padding: 0 15px 15px;
                font-size: 0.85rem;
            }
            
            /* Modals */
            .modal-content {
                padding: 25px 15px;
                margin: 10px;
            }
            
            .modal-content h2 {
                font-size: 1.5rem;
            }
        }
        
        /* Extra Small Devices */
        @media (max-width: 375px) {
            .hero-content h1 {
                font-size: 1.9rem;
            }
            
            .section-title h2 {
                font-size: 1.6rem;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.8rem;
            }
            
            .menu-img {
                height: 180px;
            }
            
            .gallery-item {
                height: 180px;
            }
            
            .newsletter-box h3 {
                font-size: 1.3rem;
            }
            
            .map-frame {
                height: 250px;
            }
        }
        
        /* Landscape Phone Orientation */
        @media (max-height: 500px) and (orientation: landscape) {
            #home {
                height: auto;
                min-height: 100vh;
                padding: 100px 20px 50px;
            }
            
            .hero-content h1 {
                font-size: 2rem;
            }
            
            .hero-content p {
                margin-bottom: 20px;
            }
            
            .nav-links.active {
                max-height: 200px;
                overflow-y: auto;
            }
        }
        
        /* High DPI / Retina Displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .menu-img,
            .gallery-item img,
            .about-img img,
            .cart-item-img {
                image-rendering: -webkit-optimize-contrast;
            }
        }
        
        /* Print Styles */
        @media print {
            nav, .cart-icon, .chat-widget, .loyalty-badge, .chef-special-banner,
            .cart-sidebar, .modal, .upi-modal, .btn {
                display: none !important;
            }
            
            body {
                background: white;
                color: black;
            }
            
            section {
                page-break-inside: avoid;
            }
        }
        
        /* Reduced Motion for Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .weather-icon {
                animation: none;
            }
        }
    </style>
    
    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
    <style>
        /* Navbar search  in-input microphone + left icon */
        /* These styles override the earlier definitions for better specificity */
        @media (min-width: 901px) {
            .search-wrapper { margin: 0 16px; }
        }
        
        @media (max-width: 900px) {
            .search-wrapper { margin: 0 8px; }
            #siteSearch { padding: 8px 46px 8px 38px; border-radius: 24px; font-size: 0.95rem; }
        }
        
        @media (max-width: 600px) {
            .search-wrapper { 
                margin: 0 6px; 
                width: 100%;
                order: 10;
            }
            #siteSearch { 
                padding: 8px 42px 8px 36px; 
                font-size: 0.9rem;
                width: 100%;
            }
            /* Make navigation wrap on mobile */
            .bottom-nav-bar, header, nav, .nav-container {
                flex-wrap: wrap !important;
            }
        }
        
        @media (max-width: 480px) {
            .search-wrapper { 
                margin: 0 4px; 
                width: 100%;
                order: 10;
            }
            #siteSearch { 
                padding: 8px 40px 8px 34px; 
                font-size: 0.85rem;
                width: 100%;
            }
            /* Make navigation wrap on mobile */
            .bottom-nav-bar, header, nav, .nav-container {
                flex-wrap: wrap !important;
            }
        }
        
        /* Mobile friendly date/time placeholders */
        input[type="date"]:required:invalid::-webkit-datetime-edit,
        input[type="time"]:required:invalid::-webkit-datetime-edit {
            color: transparent;
        }
        input[type="date"]:required:invalid::-webkit-datetime-edit:before,
        input[type="time"]:required:invalid::-webkit-datetime-edit:before {
            content: attr(data-placeholder) !important;
            color: #999;
        }

        /* Fallback/Standard method for other browsers */
        input[type="date"]:required:invalid::before,
        input[type="time"]:required:invalid::before {
            content: attr(data-placeholder);
            width: 100%;
            color: #999;
        }

        input[type="date"]:valid::before,
        input[type="time"]:valid::before {
            display: none;
        }

        /* Voice Search Tooltip */
        .search-wrapper {
            position: relative;
        }

        .voice-tooltip {
            position: absolute;
            top: 115%;
            right: 0;
            background: var(--primary);
            color: #000;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            pointer-events: none; /* Let clicks pass through if it overlaps */
        }

        .voice-tooltip::before {
            content: '';
            position: absolute;
            bottom: 100%;
            right: 15px;
            border: 6px solid transparent;
            border-bottom-color: var(--primary);
        }

        .voice-tooltip.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
    </style>
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, setDoc, doc, getDoc, serverTimestamp, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        
        // Your Firebase configuration (provided by user)
        const firebaseConfig = {
            apiKey: "AIzaSyAuESiqZwtxAb8lRCrQFW0W06IaywZAjLg",
            authDomain: "urban-hub-e7b29.firebaseapp.com",
            projectId: "urban-hub-e7b29",
            storageBucket: "urban-hub-e7b29.firebasestorage.app",
            messagingSenderId: "845032641100",
            appId: "1:845032641100:web:d4c01217cab4d977231ae9"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Make Firebase functions available globally
        window.firebaseDB = db;
        window.firebaseCollection = collection;
        window.firebaseAddDoc = addDoc;
        window.firebaseSetDoc = setDoc;
        window.firebaseDoc = doc;
        window.firebaseGetDoc = getDoc;
        window.firebaseQuery = query;
        window.firebaseWhere = where;
        window.firebaseGetDocs = getDocs;
        window.firebaseTimestamp = serverTimestamp;
        window.firebaseReady = true;
        
        console.log(' Firebase initialized successfully (Firestore Only)!');
    </script>
    
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        // Initialize EmailJS
        (function(){
            emailjs.init("l_hMxu9Q0UDjg8Qu5");
        })();
    </script>
</head>
<body>

    <!-- Shopping Cart Icon -->
    <div class="cart-icon" onclick="toggleCart()">
        <i class="fas fa-shopping-cart"></i>
        <div class="cart-badge" id="cartBadge">0</div>
    </div>

    <!-- Live Chat Widget -->
    <div class="chat-widget" onclick="openWhatsAppChat()">
        <i class="fab fa-whatsapp"></i>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2> Your Order</h2>
            <button class="close-cart" onclick="toggleCart()"></button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="cart-empty">
                <i class="fas fa-shopping-basket"></i>
                <p>Your cart is empty</p>
                <p style="font-size: 0.9rem; margin-top: 10px;">Add some delicious items to get started!</p>
            </div>
        </div>
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total">
                <span>Total:</span>
                <span class="cart-total-price" id="cartTotal">$0.00</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">
                <i class="fas fa-check-circle"></i> Proceed to Checkout
            </button>
        </div>
    </div>

    <nav id="navbar">
        <div class="nav-container">
            <a href="#" class="logo"><img src="rehans.jpeg" alt="REHAN'S" style="height: 64px; width: auto; border-radius: 50%; margin-right: 10px;"><span style="color: var(--primary);">Multi Cuisine Restaurant</span></a>

            <div class="search-wrapper">
                <span class="search-icon"><i class="fas fa-search"></i></span>
                <input id="siteSearch" type="search" placeholder="Search menu, dishes or price..." aria-label="Search site">
                <button id="voiceBtn"><i class="fas fa-microphone"></i></button>
                <div class="voice-tooltip" id="voiceTooltip">Say to Order</div>
            </div>

            <ul class="nav-links" id="navLinks">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#menu">Menu</a></li>
                <li><a href="#gallery">Gallery</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><button class="btn btn-outline" onclick="openCustomerModal()">Sign In</button></li>
                <li><button class="btn btn-primary" onclick="openModal()">Book Table</button></li>
                <li id="pwaInstallItem" style="display: none;"><button class="btn btn-outline" id="pwaInstallBtn"><i class="fas fa-download"></i> Install App</button></li>
            </ul>
            <div id="customerArea"></div>
            <div class="hamburger" id="hamburger">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- Bottom fixed bar: Book Table action -->
    <div class="bottom-nav" id="bottomNav">
        <button class="btn btn-primary" onclick="openModal()">Book Table</button>
    </div>


    <section id="home">
        <div class="container hero-content">
            <h4>Welcome to the Experience</h4>
            <h1>Good Food Is <span class="highlight">Good Mood</span></h1>
            <p>Discover bold flavors, creative dishes, and a vibrant dining vibe  made for food lovers, dreamers, and explorers.</p>
            <a href="#menu" class="btn btn-primary">View Menu</a>
            <a href="#contact" class="btn btn-outline" style="margin-left: 10px;">Contact Us</a>
        </div>
    </section>

    <section id="about">
        <div class="container about-grid">
            <div class="about-img">
                <img src="https://images.unsplash.com/photo-1559339352-11d035aa65de?q=80&w=1974&auto=format&fit=crop" alt="Chef Cooking">
            </div>
            <div class="about-text">
                <h3>Our Story</h3>
                <p>REHAN'S Multi Cuisine Restaurants wasn't just built; it was crafted. Born from a passion for gastronomy and modern aesthetics, we serve dishes that tell a story. Our ingredients are locally sourced, and our recipes are globally inspired.</p>
                <br>
                <p>Step into an atmosphere designed for comfort, luxury, and unforgettable moments.</p>
                <br>
                <div style="display: flex; gap: 20px;">
                    <div>
                        <h2 style="color: var(--primary);">15+</h2>
                        <span>Years Experience</span>
                    </div>
                    <div>
                        <h2 style="color: var(--primary);">50+</h2>
                        <span>Master Chefs</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Meet Our Chefs Section -->
    <section id="our-chefs">
        <div class="container">
            <div class="section-title">
                <h2>Meet Our Chefs</h2>
                <p>The culinary artists behind your unforgettable dining experience</p>
            </div>
            <div class="chefs-grid">
                <div class="chef-card">
                    <img src="https://images.unsplash.com/photo-1577219491135-ce391730fb2c?q=80&w=1954&auto=format&fit=crop" alt="Executive Chef" class="chef-img">
                    <div class="chef-info">
                        <h3>Marco Rodriguez</h3>
                        <p class="chef-role">Executive Chef</p>
                        <p class="chef-bio">With 20 years of experience in Michelin-starred restaurants across Europe, Chef Marco brings innovation and tradition together.</p>
                        <div class="chef-social">
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
                <div class="chef-card">
                    <img src="https://images.unsplash.com/photo-1581299894007-aaa50297cf16?q=80&w=1974&auto=format&fit=crop" alt="Pastry Chef" class="chef-img">
                    <div class="chef-info">
                        <h3>Sophie Laurent</h3>
                        <p class="chef-role">Head Pastry Chef</p>
                        <p class="chef-bio">Trained at Le Cordon Bleu Paris, Sophie creates desserts that are both visually stunning and irresistibly delicious.</p>
                        <div class="chef-social">
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
                <div class="chef-card">
                    <img src="https://images.unsplash.com/photo-1600565193348-f74bd3c7ccdf?q=80&w=2070&auto=format&fit=crop" alt="Sous Chef" class="chef-img">
                    <div class="chef-info">
                        <h3>Raj Patel</h3>
                        <p class="chef-role">Sous Chef & Spice Master</p>
                        <p class="chef-bio">A master of Indian and fusion cuisine, Raj adds authentic spices and bold flavors to every creation.</p>
                        <div class="chef-social">
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Signature Dishes Section -->
    <section id="signature-dishes">
        <div class="container">
            <div class="section-title">
                <h2>Signature Creations</h2>
                <p>Award-winning dishes that define REHAN'S Multi Cuisine Restaurants</p>
            </div>
            <div class="signature-grid">
                <div class="signature-card">
                    <img src="https://images.unsplash.com/photo-1544025162-d76694265947?q=80&w=2069&auto=format&fit=crop" alt="Signature Steak" class="signature-img">
                    <div class="signature-content">
                        <span class="signature-badge"> CHEF'S PRIDE</span>
                        <h3>Gold Leaf Wagyu Steak</h3>
                        <p>A5 Japanese Wagyu, 24k gold leaf, truffle jus, served with seasonal vegetables</p>
                        <span class="signature-price">8,999</span>
                    </div>
                </div>
                <div class="signature-card">
                    <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141?q=80&w=2032&auto=format&fit=crop" alt="Signature Seafood" class="signature-img">
                    <div class="signature-content">
                        <span class="signature-badge"> AWARD WINNER</span>
                        <h3>Ocean's Symphony Platter</h3>
                        <p>Fresh lobster, oysters, king prawns, and caviar on a bed of crushed ice</p>
                        <span class="signature-price">12,999</span>
                    </div>
                </div>
                <div class="signature-card">
                    <img src="https://images.unsplash.com/photo-1587314168485-3236d6710814?q=80&w=2070&auto=format&fit=crop" alt="Signature Dessert" class="signature-img">
                    <div class="signature-content">
                        <span class="signature-badge"> INSTAGRAM FAMOUS</span>
                        <h3>Golden Chocolate Sphere</h3>
                        <p>Warm chocolate sauce unveils Belgian chocolate mousse, gold dust, and raspberry coulis</p>
                        <span class="signature-price">1,499</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Weather-Based Specials Section -->
    <section id="weather-specials">
        <div class="container">
            <div class="section-title">
                <h2>Today's Weather Special</h2>
                <p>Perfect dish recommendations based on current weather</p>
            </div>
            <div class="weather-card">
                <div class="weather-info">
                    <div class="weather-icon" id="weatherIcon"></div>
                    <div class="temperature" id="temperature">Loading...</div>
                    <div class="weather-desc" id="weatherDesc">Fetching weather data...</div>
                    <div class="weather-location" id="location"></div>
                </div>
                <div class="special-recommendation">
                    <h3><span></span> Chef's Weather Recommendation</h3>
                    <div class="special-dish" id="specialDish">
                        <h4 id="dishName">Loading...</h4>
                        <p id="dishDesc">We're preparing a special recommendation based on the weather...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="menu">
        <div class="container">
            <div class="section-title">
                <h2>Our Menu</h2>
                <p>Curated flavors for every palate</p>
            </div>

            <div class="menu-filters">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="veg">Veg</button>
                <button class="filter-btn" data-filter="non-veg">Non-Veg</button>
                <button class="filter-btn" data-filter="dessert">Desserts</button>
                <button class="filter-btn" data-filter="drinks">Drinks</button>
            </div>

            <div class="menu-grid" id="menuContainer">
                </div>
        </div>
    </section>

    <section id="gallery">
        <div class="container">
            <div class="section-title">
                <h2>Gallery</h2>
                <p>A glimpse into our world</p>
            </div>
            <div class="gallery-grid">
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?q=80&w=2070&auto=format&fit=crop" alt="Cocktail"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?q=80&w=1974&auto=format&fit=crop" alt="Dish"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1592861956120-e524fc739696?q=80&w=2070&auto=format&fit=crop" alt="Interior"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0?q=80&w=2070&auto=format&fit=crop" alt="Plating"></div>
            </div>
        </div>
    </section>

    <section id="testimonials">
        <div class="container">
            <div class="section-title">
                <h2>Testimonials</h2>
                <p>What our guests say</p>
            </div>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="quote">"The ambiance is stunning, but the food is on another level. The truffle pasta is a must-try!"</p>
                    <p class="client-name">- Sarah Jenkins</p>
                </div>
                <div class="testimonial-card">
                    <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i></div>
                    <p class="quote">"Best dining experience in the city. The service was impeccable and the cocktails were unique."</p>
                    <p class="client-name">- Michael Chen</p>
                </div>
                <div class="testimonial-card">
                    <div class="stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                    <p class="quote">"A visual and culinary masterpiece. Perfect for anniversary dates."</p>
                    <p class="client-name">- Emma Thompson</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Private Events Section -->
    <section id="private-events">
        <div class="container">
            <div class="section-title">
                <h2>Private Events</h2>
                <p>Make your special moments extraordinary</p>
            </div>
            <div class="events-grid">
                <div class="event-card">
                    <div class="event-icon"></div>
                    <h3>Weddings & Receptions</h3>
                    <p>Create magical memories with our elegant wedding packages, customized menus, and dedicated event coordinators.</p>
                    <ul class="event-features">
                        <li><i class="fas fa-check"></i> Capacity up to 200 guests</li>
                        <li><i class="fas fa-check"></i> Custom menu planning</li>
                        <li><i class="fas fa-check"></i> Dedicated event manager</li>
                        <li><i class="fas fa-check"></i> Floral & dcor services</li>
                    </ul>
                    <button class="btn btn-primary" onclick="openModal()">Inquire Now</button>
                </div>
                <div class="event-card">
                    <div class="event-icon"></div>
                    <h3>Birthday Celebrations</h3>
                    <p>From intimate gatherings to grand parties, we create personalized birthday experiences that wow.</p>
                    <ul class="event-features">
                        <li><i class="fas fa-check"></i> Private dining rooms</li>
                        <li><i class="fas fa-check"></i> Custom cakes & desserts</li>
                        <li><i class="fas fa-check"></i> DJ & entertainment options</li>
                        <li><i class="fas fa-check"></i> Surprise arrangements</li>
                    </ul>
                    <button class="btn btn-primary" onclick="openModal()">Plan Party</button>
                </div>
                <div class="event-card">
                    <div class="event-icon"></div>
                    <h3>Corporate Events</h3>
                    <p>Impress clients and colleagues with our professional corporate dining and meeting spaces.</p>
                    <ul class="event-features">
                        <li><i class="fas fa-check"></i> Conference facilities</li>
                        <li><i class="fas fa-check"></i> AV equipment included</li>
                        <li><i class="fas fa-check"></i> Business lunch packages</li>
                        <li><i class="fas fa-check"></i> Team building menus</li>
                    </ul>
                    <button class="btn btn-primary" onclick="openModal()">Book Now</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Awards & Recognition Section -->
    <section id="awards">
        <div class="container">
            <div class="section-title">
                <h2>Awards & Recognition</h2>
                <p>Our commitment to excellence, recognized worldwide</p>
            </div>
            <div class="awards-container">
                <div class="award-item">
                    <div class="award-icon"></div>
                    <h4>Michelin Star</h4>
                    <p>2023 - Present</p>
                </div>
                <div class="award-item">
                    <div class="award-icon"></div>
                    <h4>Best Fine Dining</h4>
                    <p>Times Food Awards 2024</p>
                </div>
                <div class="award-item">
                    <div class="award-icon"></div>
                    <h4>Wine Spectator Award</h4>
                    <p>Excellence in Wine Service</p>
                </div>
                <div class="award-item">
                    <div class="award-icon"></div>
                    <h4>Chef of the Year</h4>
                    <p>Culinary Guild 2024</p>
                </div>
                <div class="award-item">
                    <div class="award-icon"></div>
                    <h4>Luxury Dining Award</h4>
                    <p>Forbes Travel Guide</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq">
        <div class="container">
            <div class="section-title">
                <h2>Frequently Asked Questions</h2>
                <p>Everything you need to know about dining with us</p>
            </div>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Do I need a reservation?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-content">
                            While walk-ins are welcome, we highly recommend making a reservation, especially for weekends and special occasions. You can book online through our website or call us at +91 98765 43210.
                        </div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>What is your dress code?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-content">
                            We maintain a smart casual dress code. We kindly request guests to avoid sportswear, flip-flops, and beachwear. For our private dining rooms, business casual or formal attire is preferred.
                        </div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Do you accommodate dietary restrictions?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-content">
                            Absolutely! We cater to various dietary requirements including vegetarian, vegan, gluten-free, and halal options. Please inform us of any allergies or restrictions when making your reservation.
                        </div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Is parking available?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-content">
                            Yes, we offer complimentary valet parking for all our guests. Self-parking is also available in our underground parking lot with direct elevator access to the restaurant.
                        </div>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Do you offer gift cards?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-content">
                            Yes! Our gift cards are available in any denomination and make perfect presents for food lovers. You can purchase them at the restaurant or contact us for digital gift cards.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Location Map Section -->
    <section id="location-map">
        <div class="container">
            <div class="section-title">
                <h2>Visit Us</h2>
                <p>Find us at the heart of the city</p>
            </div>
            <div class="map-container">
                <div class="map-info">
                    <h3> REHAN'S Multi Cuisine Restaurants</h3>
                    <div class="map-details">
                        <p><i class="fas fa-map-marker-alt"></i> 283,Bazaar St,Pernambut </p>
                        <p><i class="fas fa-phone"></i> +91 98765 43210</p>
                        <p><i class="fas fa-envelope"></i> mohammedmohathaseem25@gmail.com</p>
                    </div>
                    <div class="map-details">
                        <p><i class="fas fa-clock"></i> <strong>Opening Hours:</strong></p>
                        <p>Monday - Friday: 11:00 AM - 11:00 PM</p>
                        <p>Saturday - Sunday: 10:00 AM - 12:00 AM</p>
                    </div>
                    <button class="btn btn-primary" onclick="getDirections()">
                        <i class="fas fa-directions"></i> Get Directions
                    </button>
                </div>
                <div class="map-frame">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3771.9373094927644!2d72.82777731490081!3d19.017615487112726!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3be7ce7d0c6e5e0f%3A0x4a1c3f3e3f3e3f3e!2sGateway%20of%20India!5e0!3m2!1sen!2sin!4v1234567890123!5m2!1sen!2sin" 
                        width="100%" 
                        height="100%" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy">
                    </iframe>
                </div>
            </div>
        </div>
    </section>

    <section id="contact">
        <div class="container">
            <div class="section-title">
                <h2>Contact Us</h2>
                <p>We'd love to hear from you</p>
            </div>
            <div class="contact-container">
                <form id="contactForm">
                    <div class="form-group">
                        <input type="text" class="form-control" id="contactName" placeholder="Your Name" required>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-control" id="contactEmail" placeholder="Your Email" required>
                    </div>
                    <div class="form-group">
                        <input type="tel" class="form-control" id="contactPhone" placeholder="Your Phone Number" required>
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" id="contactMessage" rows="5" placeholder="Your Message" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Send Message</button>
                </form>
            </div>
        </div>
    </section>

    <footer style="padding-bottom: 80px;">
        <div class="container">
            <div class="footer-logo">REHAN'S Multi Cuisine Restaurants</div>
            <p class="dev-credit">Developed by <a href="https://syedmohathaseem.tech" target="_blank" rel="noopener noreferrer">syedmohathaseem.tech</a></p>
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
            </div>
            <p>&copy; 2026 REHAN'S Multi Cuisine Restaurants. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- UPI Payment Modal -->
    <div id="upiModal" class="upi-modal">
        <div class="upi-modal-content">
            <span class="upi-close" onclick="closeUpiModal()">&times;</span>
            <div class="upi-header">
                <h2> Complete Payment</h2>
                <div class="upi-amount" id="upiAmount">0</div>
            </div>

            <div class="upi-qr-container">
                <canvas id="upiQrCode" class="upi-qr-code"></canvas>
            </div>

            <div class="upi-id-display">
                <strong>UPI ID:</strong> <span id="displayUpiId">9123504183@fam</span>
            </div>

            <button class="upi-copy-btn" onclick="copyUpiId()">
                <i class="fas fa-copy"></i> Copy UPI ID
            </button>

            <div class="upi-apps">
                <button class="upi-app-btn" onclick="openUpiApp('paytm')">
                    <i class="fas fa-mobile-alt"></i> Paytm
                </button>
                <button class="upi-app-btn" onclick="openUpiApp('phonepe')">
                    <i class="fas fa-mobile-alt"></i> PhonePe
                </button>
                <button class="upi-app-btn" onclick="openUpiApp('gpay')">
                    <i class="fas fa-mobile-alt"></i> Google Pay
                </button>
            </div>

            <div class="payment-instructions">
                <h4> Payment Instructions:</h4>
                <ol>
                    <li>Scan the QR code or use the UPI ID</li>
                    <li>Complete payment in your UPI app</li>
                    <li>Take a screenshot of the payment confirmation</li>
                    <li>Click "Payment Done" below</li>
                </ol>
            </div>

            <button class="checkout-btn" onclick="confirmPayment()">
                <i class="fas fa-check-circle"></i> Payment Done
            </button>
        </div>
    </div>

    <div id="reservationModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 style="text-align: center; color: var(--primary); margin-bottom: 20px;">Book A Table</h2>
            <form id="reservationForm">
                <div class="form-group">
                    <input type="text" class="form-control" id="bookingName" placeholder="Your Name" required>
                </div>
                <div class="form-group">
                    <input type="email" class="form-control" id="bookingEmail" placeholder="Your Email" required>
                </div>
                <div class="form-group">
                    <input type="tel" class="form-control" id="bookingPhone" placeholder="Phone Number" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <input type="date" class="form-control" id="bookingDate" required data-placeholder="Date">
                    </div>
                    <div class="form-group">
                        <input type="time" class="form-control" id="bookingTime" required data-placeholder="Time">
                    </div>
                </div>
                <div class="form-group">
                    <input type="number" class="form-control" id="bookingGuests" placeholder="Number of Guests" min="1" max="20" required>
                </div>
                <div class="form-group">
                    <textarea class="form-control" id="bookingNotes" rows="3" placeholder="Special Requests (Optional)"></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Confirm Booking</button>
            </form>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    

    <!-- Edit / Add Menu Item Modal (Admin only) -->
    
    <!-- Customer Modal -->
    <div id="customerModal" class="modal">
        <div class="modal-content premium-login-modal">
            <span class="close-modal" onclick="closeCustomerModal()">&times;</span>
            
            <div id="customerLoginView" style="display:block;">
                <div class="login-header">
                    <div class="login-icon"></div>
                    <h2>REHAN'S</h2>
                    <p class="login-subtitle">Sign In</p>
                </div>
                
                <form id="customerLoginForm">
                    <div class="premium-form-group">
                        <label>Email</label>
                        <input type="email" id="customerEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="premium-form-group">
                        <label>Password</label>
                        <input type="password" id="customerPassword" placeholder="Enter password" required>
                    </div>
                    <button type="submit" class="premium-login-btn">Sign In</button>
                </form>
                
                <div class="credentials-info-customer">
                    <p>Test Credentials:</p>
                    <div class="cred-text">Email: admin@gmail.com</div>
                    <div class="cred-text">Password: admin123</div>
                </div>
                
                <p class="login-footer">Don't have an account? <a href="#" onclick="showCustomerSignup();return false;">Create one</a></p>
            </div>

            <div id="customerSignupView" style="display:none;">
                <div class="login-header">
                    <div class="login-icon"></div>
                    <h2>REHAN'S</h2>
                    <p class="login-subtitle">Create Account</p>
                </div>
                
                <form id="customerSignupForm">
                    <div class="premium-form-group">
                        <label>Full Name</label>
                        <input type="text" id="signupName" placeholder="Enter your name" required>
                    </div>
                    <div class="premium-form-group">
                        <label>Email</label>
                        <input type="email" id="signupEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="premium-form-group">
                        <label>Password</label>
                        <input type="password" id="signupPassword" placeholder="Create password" required>
                    </div>
                    <button type="submit" class="premium-login-btn">Create Account</button>
                </form>
                <p class="login-footer">Already have an account? <a href="#" onclick="showCustomerLogin();return false;">Sign in</a></p>
            </div>
        </div>
    </div>

    <div id="editMenuModal" class="modal">
        <div class="modal-content" style="max-width:520px;">
            <span class="close-modal" onclick="closeEditMenuModal()">&times;</span>
            <h2 id="editModalTitle" style="text-align:center; color:var(--primary); margin-bottom:12px;">Edit Menu Item</h2>
            <form id="editMenuForm">
                <input type="hidden" id="editItemId">
                <div class="form-group">
                    <input type="text" class="form-control" id="editName" placeholder="Item Name" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="editPrice" placeholder="Price (e.g. 499)" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="editCategory" placeholder="Category (veg, non-veg, dessert, drinks)" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="editImg" placeholder="Image URL (optional)">
                </div>
                <div class="form-group">
                    <textarea class="form-control" id="editDesc" rows="3" placeholder="Description"></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%;">Save Item</button>
            </form>
        </div>
    </div>

    <script>
        // --- DATA ---
        let menuItems = [
            { id: 1, name: "Truffle Mushroom Pasta", price: "10", category: "veg", img: "https://images.unsplash.com/photo-1626844131082-256783844137?q=80&w=1935&auto=format&fit=crop", desc: "Creamy truffle sauce, wild mushrooms, parmesan." },
            { id: 2, name: "Grilled Salmon", price: "1,999", category: "non-veg", img: "https://images.unsplash.com/photo-1485921325833-c519f76c4927?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3", desc: "Fresh atlantic salmon, asparagus, lemon butter." },
            { id: 3, name: "Classic Steak", price: "2,499", category: "non-veg", img: "https://images.unsplash.com/photo-1600891964092-4316c288032e?q=80&w=2070&auto=format&fit=crop", desc: "Ribeye cooked to perfection with garlic herbs." },
            { id: 4, name: "Paneer Tikka", price: "1,299", category: "veg", img: "https://images.unsplash.com/photo-1567188040759-fb8a883dc6d8?q=80&w=2034&auto=format&fit=crop", desc: "Spiced cottage cheese, charcoal grilled." },
            { id: 5, name: "Molten Lava Cake", price: "999", category: "dessert", img: "https://images.unsplash.com/photo-1624353365286-3f8d62daad51?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3", desc: "Warm chocolate cake with vanilla bean ice cream." },
            { id: 6, name: "Mojito Supreme", price: "799", category: "drinks", img: "https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?q=80&w=1887&auto=format&fit=crop", desc: "Fresh mint, lime, rum, sparkling soda." },
        ];

        // Weather-based dish recommendations
        const weatherRecommendations = {
            clear: {
                name: "Grilled Salmon with Citrus Salad",
                desc: "Perfect for sunny weather! Fresh grilled salmon with a refreshing citrus salad, light and energizing.",
                icon: ""
            },
            clouds: {
                name: "Truffle Mushroom Pasta",
                desc: "Cozy cloudy day calls for comfort food. Creamy truffle pasta with wild mushrooms and parmesan.",
                icon: ""
            },
            rain: {
                name: "Classic Hot Soup & Grilled Cheese",
                desc: "Rainy days deserve warmth! Our signature tomato soup with a perfectly grilled cheese sandwich.",
                icon: ""
            },
            snow: {
                name: "Spicy Lamb Stew",
                desc: "Beat the cold with our hearty lamb stew, slow-cooked with aromatic spices and root vegetables.",
                icon: ""
            },
            thunderstorm: {
                name: "Comfort Mac & Cheese",
                desc: "Weather the storm with ultimate comfort food - our signature truffle mac & cheese.",
                icon: ""
            },
            hot: {
                name: "Iced Mojito & Caesar Salad",
                desc: "Stay cool with our refreshing mojito supreme and crisp Caesar salad.",
                icon: ""
            },
            cold: {
                name: "Molten Lava Cake with Hot Chocolate",
                desc: "Warm up with our decadent molten chocolate cake paired with rich hot chocolate.",
                icon: ""
            }
        };

        // --- WEATHER API FUNCTION ---
        async function fetchWeather() {
            try {
                // Use restaurant location in Pernambut instead of user's geolocation
                // Pernambut coordinates: 12.9446N, 78.7194E
                const lat = 12.9446;
                const lon = 78.7194;
                
                // Fetch weather data for Pernambut
                const weatherResponse = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`
                );
                const weatherData = await weatherResponse.json();
                
                // Use fixed location name for restaurant
                const locationData = { 
                    city: 'Pernambut',
                    locality: 'Tamil Nadu'
                };
                
                updateWeatherUI(weatherData, locationData);
            } catch (error) {
                console.error('Weather fetch error:', error);
                document.getElementById('temperature').textContent = 'Unable to fetch weather';
                document.getElementById('weatherDesc').textContent = 'Please check your connection';
            }
        }

        async function fetchDefaultWeather() {
            // Use Pernambut as default location
            const lat = 12.9446;
            const lon = 78.7194;
            
            const weatherResponse = await fetch(
                `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`
            );
            const weatherData = await weatherResponse.json();
            
            updateWeatherUI(weatherData, { city: 'Pernambut', locality: 'Tamil Nadu' });
        }

        function updateWeatherUI(weatherData, locationData) {
            const temp = weatherData.current_weather.temperature;
            const weatherCode = weatherData.current_weather.weathercode;
            
            // Update temperature (convert to Fahrenheit)
            const tempF = (temp * 9/5) + 32;
            document.getElementById('temperature').textContent = `${Math.round(tempF)}F`;
            
            // Determine weather condition and icon
            let condition = 'clear';
            let weatherIcon = '';
            let weatherDescription = 'Clear Sky';
            
            if (weatherCode === 0) {
                condition = 'clear';
                weatherIcon = '';
                weatherDescription = 'Clear Sky';
            } else if (weatherCode <= 3) {
                condition = 'clouds';
                weatherIcon = '';
                weatherDescription = 'Partly Cloudy';
            } else if (weatherCode <= 67) {
                condition = 'rain';
                weatherIcon = '';
                weatherDescription = 'Rainy';
            } else if (weatherCode <= 77) {
                condition = 'snow';
                weatherIcon = '';
                weatherDescription = 'Snowy';
            } else if (weatherCode >= 95) {
                condition = 'thunderstorm';
                weatherIcon = '';
                weatherDescription = 'Thunderstorm';
            }
            
            // Temperature-based adjustments
            if (tempF > 85) condition = 'hot';
            if (tempF < 40) condition = 'cold';
            
            // Update UI
            document.getElementById('weatherIcon').textContent = weatherIcon;
            document.getElementById('weatherDesc').textContent = weatherDescription;
            document.getElementById('location').textContent = ` ${locationData.city || locationData.locality || 'Your Location'}`;
            
            // Update recommendation
            const recommendation = weatherRecommendations[condition] || weatherRecommendations.clear;
            document.getElementById('dishName').textContent = recommendation.name;
            document.getElementById('dishDesc').textContent = recommendation.desc;
        }

        // --- DOM LOAD ---
        document.addEventListener('DOMContentLoaded', () => {
            loadMenu('all');
            fetchWeather(); // Fetch weather on page load
            loadMenuFromLocalStorage(); // Load menu from admin panel edits
        });

        // --- MENU SYNC FROM LOCALSTORAGE ---
        function loadMenuFromLocalStorage() {
            const savedMenu = localStorage.getItem('restaurantMenu');
            if (savedMenu) {
                try {
                    menuItems = JSON.parse(savedMenu);
                    console.log(' Menu loaded from localStorage:', menuItems.length, 'items');
                    loadMenu('all'); // Re-render with new data
                } catch (e) {
                    console.error('Error loading menu from localStorage:', e);
                }
            }
        }

        // Listen for menu updates from admin panel
        window.addEventListener('menuUpdated', () => {
            console.log('Menu updated event received');
            loadMenuFromLocalStorage();
        });

        // Also listen for storage changes from other tabs
        window.addEventListener('storage', (e) => {
            if (e.key === 'restaurantMenu') {
                console.log('Menu updated in localStorage');
                loadMenuFromLocalStorage();
            }
        });

        // --- STICKY NAVBAR ---
        // --- OPTIMIZED SCROLL & NAVIGATION ---
        
        // Sticky Navbar (Throttled with requestAnimationFrame)
        let ticking = false;
        const nav = document.getElementById('navbar');
        
        window.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    if (window.scrollY > 50) {
                        nav.classList.add('sticky');
                    } else {
                        nav.classList.remove('sticky');
                    }
                    ticking = false;
                });
                ticking = true;
            }
        }, { passive: true });

        // Active Link Highlighting (IntersectionObserver)
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-links a[href^="#"]');
            
            // Map section IDs to their corresponding nav links for O(1) lookup
            const linkMap = new Map();
            navLinks.forEach(link => {
                const id = link.getAttribute('href').substring(1);
                linkMap.set(id, link);
            });

            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -70% 0px', // Active when section is near top/center
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Remove active class from all links
                        navLinks.forEach(link => link.classList.remove('active'));
                        
                        // Add active class to current section's link
                        const activeId = entry.target.getAttribute('id');
                        const activeLink = linkMap.get(activeId);
                        if (activeLink) {
                            activeLink.classList.add('active');
                        }
                    }
                });
            }, observerOptions);

            sections.forEach(section => observer.observe(section));
        });

        // --- MOBILE MENU ---
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');

        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
            });
        });

        // --- MENU LOGIC ---
        const menuContainer = document.getElementById('menuContainer');
        const filterBtns = document.querySelectorAll('.filter-btn');

        function renderMenuItems(items) {
            menuContainer.innerHTML = '';
            items.forEach(item => {
                // Default fallback image for menu items
                const fallbackImg = 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=500&auto=format&fit=crop&q=60';
                const itemImg = item.img || fallbackImg;
                
                const itemHTML = `
                    <div class="menu-item">
                        <img src="${itemImg}" 
                             alt="${item.name}" 
                             class="menu-img"
                             onerror="this.src='${fallbackImg}';this.onerror=null;">
                        <div class="menu-details">
                            <div class="menu-header">
                                <span class="menu-title">${item.name}</span>
                                <span class="menu-price">${item.price}</span>
                            </div>
                            <p class="menu-desc">${item.desc}</p>
                            <button class="order-btn" onclick='addToCart(${JSON.stringify(item)})'>
                                <i class="fas fa-cart-plus"></i> Order Now
                            </button>
                        </div>
                    </div>
                `;
                menuContainer.innerHTML += itemHTML;
            });
        }

        function loadMenu(category) {
            const filteredItems = category === 'all'
                ? menuItems
                : menuItems.filter(item => item.category === category);
            renderMenuItems(filteredItems);
        }

        // Search (typed + voice)
        const searchInput = document.getElementById('siteSearch');
        const voiceBtn = document.getElementById('voiceBtn');

        function searchMenu(query) {
            const activeFilterBtn = document.querySelector('.filter-btn.active');
            const activeFilter = activeFilterBtn ? activeFilterBtn.getAttribute('data-filter') : 'all';

            let results = activeFilter === 'all' ? menuItems.slice() : menuItems.filter(i => i.category === activeFilter);
            if (query && query.trim()) {
                const q = query.toLowerCase();
                results = results.filter(i =>
                    i.name.toLowerCase().includes(q) ||
                    i.desc.toLowerCase().includes(q) ||
                    (i.price && i.price.toLowerCase().includes(q))
                );
            }

            renderMenuItems(results);
            // If there are results (or even if empty), bring the user to the menu section
            const menuSection = document.getElementById('menu');
            if (menuSection) {
                // account for fixed navbar by subtracting its height
                setTimeout(() => {
                    try {
                        const navbar = document.getElementById('navbar');
                        const navHeight = navbar ? navbar.offsetHeight + 8 : 0;
                        const top = menuSection.getBoundingClientRect().top + window.scrollY - navHeight;
                        window.scrollTo({ top, behavior: 'smooth' });
                    } catch (e) {
                        menuSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 50);
            }
        }

        // wire up typed search
        if (searchInput) {
            let searchDebounce;
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchDebounce);
                const v = e.target.value;
                searchDebounce = setTimeout(() => searchMenu(v), 180);
            });

            searchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    searchMenu(searchInput.value);
                }
            });
        }

        // voice search using Web Speech API
        if (voiceBtn) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || null;
            if (!SpeechRecognition) {
                voiceBtn.addEventListener('click', () => {
                    showNotification('Voice search not supported in this browser.');
                });
            } else {
                // Tooltip logic
                const tooltip = document.getElementById('voiceTooltip');
                if (tooltip) {
                    // Show on load (discovery)
                    setTimeout(() => {
                        tooltip.classList.add('active');
                        setTimeout(() => {
                            tooltip.classList.remove('active');
                        }, 4000);
                    }, 1000);

                    // Show on hover
                    voiceBtn.addEventListener('mouseenter', () => tooltip.classList.add('active'));
                    voiceBtn.addEventListener('mouseleave', () => tooltip.classList.remove('active'));
                }

                const recognizer = new SpeechRecognition();
                // Enhanced settings for better accuracy
                recognizer.continuous = false; // Stop after one command to prevent duplication
                recognizer.interimResults = true; // Show real-time results
                recognizer.maxAlternatives = 3; // Get multiple alternatives for better understanding
                recognizer.lang = 'en-IN'; // Indian English

                let interimText = '';
                let isListening = false;

                voiceBtn.addEventListener('click', () => {
                    if (isListening) {
                        recognizer.stop();
                        isListening = false;
                        voiceBtn.classList.remove('listening');
                        searchInput.placeholder = 'Search menu, dishes or price...';
                        return;
                    }
                    
                    try {
                        interimText = '';
                        searchInput.value = '';
                        searchInput.placeholder = ' Listening... Speak now';
                        recognizer.start();
                        isListening = true;
                        voiceBtn.classList.add('listening');
                    } catch (e) {
                        console.error('Recognition start error:', e);
                        searchInput.placeholder = 'Search menu, dishes or price...';
                    }
                });

                recognizer.addEventListener('result', (ev) => {
                    // Get best result with improved accuracy
                    const results = ev.results;
                    let transcript = '';
                    
                    for (let i = 0; i < results.length; i++) {
                        transcript += results[i][0].transcript + ' ';
                    }
                    
                    interimText = transcript;
                    // Show real-time transcript in search box
                    if (searchInput) {
                        searchInput.value = interimText;
                        searchInput.placeholder = ' Listening...';
                    }
                    
                    if (ev.results[ev.results.length - 1].isFinal) {
                        const finalText = transcript.trim();
                        console.log(' Voice recognized:', finalText);
                        
                        // Run search with recognized text
                        if (finalText.length > 0) {
                            searchMenu(finalText);
                        }

                        // Command parsing: look for "order" commands
                        try {
                            const text = finalText.toLowerCase();
                            // Enhanced command recognition patterns
                            const orderMatch = text.match(/(?:order|add|get|i want|give me)\s+(?:now\s*)?(.+?)(?:\s+(?:please|thanks|thank you))?$/i) 
                                            || text.match(/i (?:want to|would like to) order\s+(.+)/i);
                            if (orderMatch && orderMatch[1]) {
                                const itemPhrase = orderMatch[1]
                                    .replace(/\b(?:now|please|thanks|thank you|one|a|an|the)\b/gi, '')
                                    .trim();
                                    
                                if (itemPhrase.length > 0) {
                                    // Improved fuzzy matching with scoring
                                    const normalized = itemPhrase.toLowerCase().replace(/[^a-z0-9 ]/g, '');
                                    let found = null;
                                    let bestMatch = 0;
                                    
                                    // Score-based matching for better accuracy
                                    for (const item of menuItems) {
                                        const itemName = item.name.toLowerCase();
                                        const itemDesc = (item.desc || '').toLowerCase();
                                        
                                        let score = 0;
                                        if (itemName === normalized) score = 100; // Exact match
                                        else if (itemName.includes(normalized)) score = 80; // Contains phrase
                                        else {
                                            // Word-by-word matching
                                            const words = normalized.split(' ');
                                            const matchedWords = words.filter(w => 
                                                itemName.includes(w) || itemDesc.includes(w)
                                            );
                                            score = (matchedWords.length / words.length) * 60;
                                        }
                                        
                                        if (score > bestMatch) {
                                            bestMatch = score;
                                            found = item;
                                        }
                                    }

                                    if (found && bestMatch > 40) {
                                        addToCart(found);
                                        showNotification(` Added "${found.name}" to cart!`);
                                        try { toggleCart(); } catch(e){}
                                        try { incrementNotificationBadge(1); } catch(e){}
                                        
                                        // Stop voice listening after adding to cart
                                        recognizer.stop();
                                        isListening = false;
                                        voiceBtn.classList.remove('listening');
                                        searchInput.placeholder = 'Search menu, dishes or price...';
                                        
                                        // Force UI update after a short delay to prevent race conditions
                                        setTimeout(() => {
                                            interimText = ''; // Clear internal buffer
                                            searchInput.value = ''; // Clear input
                                            searchMenu(''); // Reset menu results to show all
                                            console.log(' Search input cleared and menu reset');
                                        }, 400);
                                    } else {
                                        showNotification(` Could not find "${itemPhrase}" on the menu.`);
                                    }
                                }
                            }
                        } catch (e) { console.warn('Voice command handling error', e); }
                    }
                });

                recognizer.addEventListener('end', () => {
                    isListening = false;
                    voiceBtn.classList.remove('listening');
                    searchInput.placeholder = 'Search menu, dishes or price...';
                });

                recognizer.addEventListener('error', (err) => {
                    isListening = false;
                    voiceBtn.classList.remove('listening');
                    searchInput.placeholder = 'Search menu, dishes or price...';
                    
                    console.error('Voice recognition error:', err.error);
                    
                    // User-friendly error messages
                    const errorMessages = {
                        'no-speech': 'No speech detected. Please try again.',
                        'audio-capture': 'Microphone not accessible. Check permissions.',
                        'not-allowed': 'Microphone permission denied.',
                        'network': 'Network error. Check connection.',
                        'aborted': 'Voice recognition stopped.'
                    };
                    
                    const message = errorMessages[err.error] || 'Voice search error.';
                    if (err.error !== 'aborted') {
                        showNotification(message);
                    }
                });
            }
        }

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelector('.filter-btn.active').classList.remove('active');
                btn.classList.add('active');
                // if there's a search query apply it to the new category
                const q = searchInput ? searchInput.value : '';
                if (q && q.trim()) {
                    searchMenu(q);
                } else {
                    loadMenu(btn.getAttribute('data-filter'));
                }
            });
        });

        // --- SHOPPING CART LOGIC ---
        let cart = [];

        function toggleCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            cartSidebar.classList.toggle('active');
        }

        function addToCart(item) {
            const existingItem = cart.find(cartItem => cartItem.id === item.id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...item, quantity: 1 });
            }
            
            updateCart();
            showNotification(`${item.name} added to cart!`);
        }

        function removeFromCart(itemId) {
            const removedItem = cart.find(item => item.id === itemId);
            cart = cart.filter(item => item.id !== itemId);
            updateCart();
            if (removedItem) {
                showNotification(`${removedItem.name} removed from cart!`);
            }
        }

        function updateQuantity(itemId, change) {
            const item = cart.find(cartItem => cartItem.id === itemId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(itemId);
                } else {
                    updateCart();
                }
            }
        }

        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const cartBadge = document.getElementById('cartBadge');
            const cartFooter = document.getElementById('cartFooter');
            const cartTotal = document.getElementById('cartTotal');
            
            // Update badge
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartBadge.textContent = totalItems;
            
            // Update cart display
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="cart-empty">
                        <i class="fas fa-shopping-basket"></i>
                        <p>Your cart is empty</p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Add some delicious items to get started!</p>
                    </div>
                `;
                cartFooter.style.display = 'none';
            } else {
                let cartHTML = '';
                let total = 0;
                
                cart.forEach(item => {
                    const itemPrice = parseFloat(item.price.replace('', '').replace(/,/g, ''));
                    const itemTotal = itemPrice * item.quantity;
                    total += itemTotal;
                    
                    cartHTML += `
                        <div class="cart-item">
                            <img src="${item.img}" alt="${item.name}" class="cart-item-img">
                            <div class="cart-item-details">
                                <div class="cart-item-name">${item.name}</div>
                                <div class="cart-item-price">${item.price}  ${item.quantity} = ${itemTotal.toLocaleString('en-IN')}</div>
                                <div class="cart-item-controls">
                                    <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                                    <span class="qty-display">${item.quantity}</span>
                                    <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                                    <button class="remove-btn" onclick="removeFromCart(${item.id})">Remove</button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                cartItems.innerHTML = cartHTML;
                cartTotal.textContent = `${total.toLocaleString('en-IN')}`;
                cartFooter.style.display = 'block';
            }
        }

        // --- UPI PAYMENT CONFIGURATION ---
        // SETUP: Replace "yourname@paytm" with your actual UPI ID
        // Examples: yourname@paytm, yourname@ybl, 9876543210@paytm
        const UPI_ID = "9123504183@fam"; //  REPLACE THIS WITH YOUR ACTUAL UPI ID
        let currentPaymentAmount = 0;

        function checkout() {
            if (cart.length === 0) return;
            
            const total = cart.reduce((sum, item) => {
                const price = parseFloat(item.price.replace('', '').replace(/,/g, ''));
                return sum + (price * item.quantity);
            }, 0);
            
            // Check for special offer discount
            let discount = 0;
            if (total >= 2000) {
                discount = total * 0.20; // 20% discount
            }
            
            const finalTotal = total - discount;
            currentPaymentAmount = finalTotal;
            
            // Show order summary in custom popup
            showCheckoutConfirmation(total, discount, finalTotal);
        }

        function openUpiModal(amount) {
            const modal = document.getElementById('upiModal');
            document.getElementById('upiAmount').textContent = `${amount.toLocaleString('en-IN')}`;
            document.getElementById('displayUpiId').textContent = UPI_ID;
            
            // Generate UPI payment link
            const upiLink = `upi://pay?pa=${UPI_ID}&pn=REHAN'S Multi Cuisine Restaurants&am=${amount}&cu=INR&tn=Order Payment`;
            
            // Generate QR Code
            const qr = new QRious({
                element: document.getElementById('upiQrCode'),
                value: upiLink,
                size: 180,
                background: 'white',
                foreground: 'black',
                level: 'H'
            });
            
            modal.classList.add('show');
        }

        function closeUpiModal() {
            const modal = document.getElementById('upiModal');
            modal.classList.remove('show');
        }

        function copyUpiId() {
            const upiId = UPI_ID;
            navigator.clipboard.writeText(upiId).then(() => {
                showNotification(` UPI ID copied: ${upiId}`);
            }).catch(() => {
                showPopup('info', 'UPI ID', `UPI ID: ${upiId}`);
            });
        }

        function openUpiApp(app) {
            const amount = currentPaymentAmount;
            let upiUrl = `upi://pay?pa=${UPI_ID}&pn=REHAN'S Multi Cuisine Restaurants&am=${amount}&cu=INR&tn=Order Payment`;
            
            // App-specific deep links
            switch(app) {
                case 'paytm':
                    upiUrl = `paytmmp://pay?pa=${UPI_ID}&pn=REHAN'S Multi Cuisine Restaurants&am=${amount}&cu=INR`;
                    break;
                case 'phonepe':
                    upiUrl = `phonepe://pay?pa=${UPI_ID}&pn=REHAN'S Multi Cuisine Restaurants&am=${amount}&cu=INR`;
                    break;
                case 'gpay':
                    upiUrl = `tez://upi/pay?pa=${UPI_ID}&pn=REHAN'S Multi Cuisine Restaurants&am=${amount}&cu=INR`;
                    break;
            }
            
            // Try to open the app
            window.location.href = upiUrl;
            
            // Fallback to generic UPI after 2 seconds
            setTimeout(() => {
                showNotification(` If ${app} didn't open, scan the QR code or copy the UPI ID`);
            }, 2000);
        }

        async function confirmPayment() {
            closeUpiModal();
            window.orderInProgress = true; // Flag to distinguish from manual removal
            
            const total = currentPaymentAmount;
            const orderId = '#RC' + Date.now().toString().slice(-6);
            
            // Save order to Firebase Firestore
            try {
                if (window.firebaseReady) {
                    const orderData = {
                        orderId: orderId,
                        items: cart.map(item => ({
                            id: item.id,
                            name: item.name,
                            price: item.price,
                            quantity: item.quantity
                        })),
                        totalAmount: total,
                        paymentMethod: 'UPI',
                        paymentStatus: 'completed',
                        orderStatus: 'received',
                        createdAt: window.firebaseTimestamp(),
                        type: 'food_order'
                    };
                    
                    const docRef = await window.firebaseAddDoc(
                        window.firebaseCollection(window.firebaseDB, 'orders'),
                        orderData
                    );
                    console.log(' Order saved to Firebase with ID:', docRef.id);
                }
            } catch (firebaseError) {
                console.error('Firebase save error:', firebaseError);
            }
            
            // Save order to localStorage for admin panel
            try {
                const orders = JSON.parse(localStorage.getItem('restaurantOrders') || '[]');
                const orderData = {
                    id: orderId,
                    items: cart.map(item => ({
                        name: item.name,
                        price: item.price,
                        quantity: item.quantity
                    })),
                    total: total,
                    timestamp: Date.now(),
                    date: new Date().toLocaleString('en-IN'),
                    status: 'completed',
                    paymentMethod: 'UPI'
                };
                orders.unshift(orderData);
                localStorage.setItem('restaurantOrders', JSON.stringify(orders));
                console.log(' Order saved to localStorage');
            } catch (storageError) {
                console.error('localStorage save error:', storageError);
            }
            
            showNotification(` Payment of ${total.toLocaleString('en-IN')} received!`);
            try { incrementNotificationBadge(1); } catch(e){}
            
            setTimeout(() => {
                // Show custom payment confirmation popup
                showPaymentConfirmation(total, orderId);
                
                // Award loyalty points
                updateLoyaltyPoints(total);
                
                // Save order to customer's localStorage order history
                try {
                    const savedCustomerEmail = localStorage.getItem('customerEmail');
                    const customerName = localStorage.getItem('customerName') || 'Valued Customer';
                    
                    // Create order record for customer history
                    const orderRecord = {
                        orderId: orderId,
                        customerEmail: savedCustomerEmail,
                        customerName: customerName,
                        items: cart.map(i => ({
                            name: i.name,
                            quantity: i.quantity,
                            price: i.price
                        })),
                        total: total,
                        date: new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' }),
                        timestamp: Date.now(),
                        status: 'Confirmed'
                    };
                    
                    // Save to customer's order history in localStorage
                    const customerOrders = JSON.parse(localStorage.getItem('customerOrderHistory') || '[]');
                    customerOrders.unshift(orderRecord);
                    localStorage.setItem('customerOrderHistory', JSON.stringify(customerOrders));
                    
                    // Send order confirmation email via backend API
                    if (savedCustomerEmail) {
                        const itemsList = cart.map(i => `${i.name} x${i.quantity}`).join(', ');
                        
                        // Call backend API to send email with PDF invoice
                        fetch('https://rehans-invoice-server.onrender.com/send-invoice', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                email: savedCustomerEmail,
                                name: customerName,
                                orderId: orderId,
                                items: cart.map(i => ({
                                    name: i.name,
                                    qty: i.quantity,
                                    price: parseFloat(i.price.replace(/[^\d.]/g, ''))
                                })),
                                totalAmount: total
                            })
                        })
                        .then(res => res.json())
                        .then(data => {
                            if (data.success) {
                                showNotification(` Order confirmation email sent to ${savedCustomerEmail}`);
                                console.log('Email sent successfully:', data);
                            } else {
                                showNotification(` Order confirmed! Email notification saved for ${savedCustomerEmail}`);
                                console.log('Email API response:', data);
                            }
                        })
                        .catch(err => {
                            console.log('Backend not available, order saved locally');
                            showNotification(` Order ${orderId} confirmed! Details saved to your account.`);
                        });
                        
                        // Create detailed confirmation in notification panel
                        try {
                            createNotif('order', `Order Confirmed - ${orderId}`, 
                                `Dear ${customerName}, your order for ${total.toLocaleString('en-IN')} has been confirmed. Items: ${itemsList}. Check "My Orders" to view details.`,
                                { orderId: orderId, email: savedCustomerEmail, total: total }
                            );
                        } catch(e) { console.log('Notification panel not available'); }
                        
                        console.log('Order saved to customer history:', orderRecord);
                    } else {
                        showNotification(` Order ${orderId} confirmed! Create an account to track your orders.`);
                    }
                } catch (e) {
                    console.error('Error saving order to history:', e);
                }

                // Clear cart
                cart = [];
                updateCart();
                toggleCart();
            }, 500);

            
        }

        // Close modal on outside click
        window.addEventListener('click', (event) => {
            const upiModal = document.getElementById('upiModal');
            if (event.target === upiModal) {
                closeUpiModal();
            }
        });

        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 15px;
                left: 15px;
                max-width: 350px;
                margin-left: auto;
                background: linear-gradient(135deg, #d4af37, #f3e5ab);
                color: #0f0f0f;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
                z-index: 3000;
                font-weight: 600;
                font-size: 0.9rem;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // Notification badge helpers
        function incrementNotificationBadge(n = 1) {
            const badge = document.getElementById('notifBadge');
            if (!badge) return;
            let val = parseInt(badge.textContent) || 0;
            val += n;
            // format groups with spaces (e.g., 1 234)
            const formatted = val.toLocaleString().replace(/,/g, ' ');
            badge.textContent = formatted;
            badge.style.display = val > 0 ? 'flex' : 'none';
        }

        function clearNotificationBadge() {
            const badge = document.getElementById('notifBadge');
            if (!badge) return;
            badge.textContent = '0';
            badge.style.display = 'none';
        }

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100px); opacity: 0; }
            }
            @media (max-width: 480px) {
                @keyframes slideIn {
                    from { transform: translateY(-50px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateY(0); opacity: 1; }
                    to { transform: translateY(-50px); opacity: 0; }
                }
            }
        `;
        document.head.appendChild(style);

        // --- LIVE CHAT / WHATSAPP ---
        function openWhatsAppChat() {
            const phoneNumber = '919876543210'; // Replace with your WhatsApp Business number
            const message = encodeURIComponent('Hi! I would like to know more about REHAN\'S Multi Cuisine Restaurants.');
            window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');
        }

        // --- LOYALTY PROGRAM ---
        let loyaltyPoints = parseInt(localStorage.getItem('loyaltyPoints')) || 0;
        
        function updateLoyaltyPoints(orderTotal) {
            // Award 1 point per 100 spent
            const points = Math.floor(orderTotal / 100);
            loyaltyPoints += points;
            localStorage.setItem('loyaltyPoints', loyaltyPoints);
            
                // loyalty points updated (no UI badge -- notifications will show events)
            
            if (points > 0) {
                showNotification(` You earned ${points} loyalty points!`);
            }
        }

        // Display loyalty badge on load if user has points
        if (loyaltyPoints > 0) {
                // loyalty points exist; no visual badge shown (removed per request)
            }

        // --- NEWSLETTER SUBSCRIPTION ---
        function subscribeNewsletter(event) {
            event.preventDefault();
            const email = document.getElementById('newsletterEmail').value;
            
            // Here you would normally send this to your backend
            showNotification(` Thank you for subscribing with ${email}!`);
            document.getElementById('newsletterEmail').value = '';
            
            // Award loyalty points for newsletter signup (no badge shown)
            loyaltyPoints += 50;
            localStorage.setItem('loyaltyPoints', loyaltyPoints);
        }

        // --- GET DIRECTIONS ---
        function getDirections() {
            const destination = 'REHAN\'S Multi Cuisine Restaurants, Mumbai';
            window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(destination)}`, '_blank');
        }

        // --- FAQ TOGGLE ---
        function toggleFaq(element) {
            const faqItem = element.parentElement;
            const isActive = faqItem.classList.contains('active');
            
            // Close all FAQ items
            document.querySelectorAll('.faq-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Open clicked item if it wasn't already open
            if (!isActive) {
                faqItem.classList.add('active');
            }
        }

        // --- SPECIAL OFFER TIMER ---
        function startOfferTimer() {
            let timeLeft = 5 * 60 * 60 + 30 * 60; // 5 hours 30 minutes in seconds
            
            const timerElement = document.getElementById('offerTimer');
            
            const timerInterval = setInterval(() => {
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                const seconds = timeLeft % 60;
                
                timerElement.textContent = `Ends in: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                timeLeft--;
                
                if (timeLeft < 0) {
                    clearInterval(timerInterval);
                    timerElement.textContent = 'Offer Expired!';
                }
            }, 1000);
        }

        // Start the offer timer on page load
        startOfferTimer();

        // --- ADMIN PANEL LOGIC ---
        let bookings = JSON.parse(localStorage.getItem('restaurantBookings')) || [];
        let isAdminLoggedIn = false;
        let biometricCredential = null;

        // Load saved biometric credential on page load
        window.addEventListener('load', function() {
            checkBiometricSupport();
            const savedCredential = localStorage.getItem('adminBiometricCredential');
            if (savedCredential) {
                biometricCredential = JSON.parse(savedCredential);
                const regBtn = document.getElementById('registerBtn');
                const resBtn = document.getElementById('resetBtn');
                const fpBtn = document.getElementById('fingerprintBtn');
                
                if(regBtn) regBtn.style.display = 'none';
                if(resBtn) resBtn.style.display = 'inline-block';
                if(fpBtn) fpBtn.disabled = false;
            } else {
                const fpBtn = document.getElementById('fingerprintBtn');
                const resBtn = document.getElementById('resetBtn');
                if(fpBtn) fpBtn.disabled = true;
                if(resBtn) resBtn.style.display = 'none';
            }
        });

        // Check biometric support
        async function checkBiometricSupport() {
            const statusElement = document.getElementById('biometricStatus');

            try {
                if (!window.PublicKeyCredential) {
                    if(statusElement) {
                        statusElement.textContent = ' Biometric authentication not supported in this browser';
                        statusElement.style.color = '#dc3545';
                    }
                    const regBtn = document.getElementById('registerBtn');
                    const fpBtn = document.getElementById('fingerprintBtn');
                    if(regBtn) regBtn.disabled = true;
                    if(fpBtn) fpBtn.disabled = true;
                    return;
                }

                // Check if platform authenticator is available
                const available = await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();

                if (available && statusElement) {
                    statusElement.textContent = ' Biometric authentication available (Fingerprint/Face)';
                    statusElement.style.color = '#28a745';
                } else if (statusElement) {
                    statusElement.textContent = ' No built-in biometric sensor detected';
                    statusElement.style.color = '#ffc107';
                }
            } catch (error) {
                if(statusElement) {
                    statusElement.textContent = ' Error checking biometric support';
                    statusElement.style.color = '#dc3545';
                }
                console.error('Biometric support check failed:', error);
            }
        }

        function openAdminPanel() {
            document.getElementById('adminModal').classList.add('show');
            if (isAdminLoggedIn) {
                showAdminPanel();
            } else {
                showAdminLogin();
            }
        }

        function closeAdminModal() {
            const modal = document.getElementById('adminModal');
            modal.classList.remove('show');
            modal.classList.remove('admin-full');
            // restore page scroll
            document.body.style.overflow = '';
            // Reset to login form when modal is closed
            setTimeout(() => {
                isAdminLoggedIn = false;
                showAdminLogin();
            }, 300); // Wait for modal close animation
        }

        function showAdminLogin() {
            document.getElementById('adminLogin').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
        }

        function showAdminPanel() {
            const modal = document.getElementById('adminModal');
            modal.classList.add('show','admin-full');
            // prevent background scrolling while admin panel is open
            document.body.style.overflow = 'hidden';
            document.getElementById('adminLogin').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            updateBookingsDisplay();
            // render admin menu manager
            try { renderAdminMenuList(); } catch(e){}
        }

        // --- Customer Auth (Custom Firestore) ---
        let isCustomerLoggedIn = false;
        let currentUserData = null;

        function openCustomerModal() {
            const modal = document.getElementById('customerModal');
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
            showCustomerLogin();
        }

        function closeCustomerModal() {
            const modal = document.getElementById('customerModal');
            if(modal) { modal.classList.remove('show'); }
            document.body.style.overflow = '';
        }

        function showCustomerLogin() {
            document.getElementById('customerLoginView').style.display = 'block';
            document.getElementById('customerSignupView').style.display = 'none';
        }

        function showCustomerSignup() {
            document.getElementById('customerLoginView').style.display = 'none';
            document.getElementById('customerSignupView').style.display = 'block';
        }

        // Custom Signup: Store directly to Firestore
        async function handleCustomerSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim().toLowerCase();
            const password = document.getElementById('signupPassword').value;

            console.log(' Custom Signup attempt:', { name, email });

            // Wait for Firebase
            if (!window.firebaseReady) {
                showPopup('error', 'Error', 'System not ready. Please refresh.');
                return;
            }

            try {
                // 1. Check if email already exists in Firestore
                const usersRef = window.firebaseCollection(window.firebaseDB, 'users');
                const q = window.firebaseQuery(usersRef, window.firebaseWhere("email", "==", email));
                const querySnapshot = await window.firebaseGetDocs(q);

                if (!querySnapshot.empty) {
                    showPopup('error', 'Signup Failed', 'An account with this email already exists.');
                    return;
                }

                // 2. Create new user data
                const userId = 'user_' + Date.now(); // Custom unique ID
                const userData = {
                    uid: userId,
                    name: name,
                    email: email,
                    password: password, // Storing as requested (ensure security compliance in prod)
                    createdAt: window.firebaseTimestamp(),
                    lastLogin: window.firebaseTimestamp()
                };

                // 3. Save directly to Firestore 'users' collection
                await window.firebaseSetDoc(
                    window.firebaseDoc(window.firebaseDB, 'users', userId),
                    userData
                );

                console.log(' User data saved to Firestore:', userId);

                // 4. Set local session
                currentUserData = { uid: userId, name: name, email: email };
                isCustomerLoggedIn = true;
                localStorage.setItem('currentCustomer', JSON.stringify(currentUserData));
                
                updateCustomerUI();
                closeCustomerModal();
                showNotification(' Account created successfully!');
                
            } catch (error) {
                console.error('Signup Error:', error);
                showPopup('error', 'Signup Failed', 'Could not save data. Check internet connection.');
            }
        }

        // Custom Login: Check Firestore
        async function handleCustomerLogin(e) {
            e.preventDefault();
            const email = document.getElementById('customerEmail').value.trim().toLowerCase();
            const password = document.getElementById('customerPassword').value;
            
            // Checking Admin Login
            if(email === 'admin@gmail.com' && password === 'admin123') {
                closeCustomerModal();
                showPopup('success', 'Admin Login Successful!', 'Welcome back, Admin. Redirecting...');
                setTimeout(() => {
                    sessionStorage.setItem('adminLoggedIn', 'true');
                    sessionStorage.setItem('adminUsername', 'admin');
                    window.location.href = 'admin-panel.html';
                }, 1500);
                return;
            }

            if (!window.firebaseReady) {
                showPopup('error', 'Error', 'System not ready. Please refresh.');
                return;
            }

            try {
                showNotification(' Verifying credentials...');

                // 1. Query Firestore for matching email AND password
                // Note: Indexing might be required for compound queries if this grows
                
                // Simpler approach: Query by email first
                const usersRef = window.firebaseCollection(window.firebaseDB, 'users');
                const q = window.firebaseQuery(usersRef, window.firebaseWhere("email", "==", email));
                const querySnapshot = await window.firebaseGetDocs(q);

                if (querySnapshot.empty) {
                    showPopup('error', 'Login Failed', 'No account found with this email.');
                    return;
                }

                // 2. Check password matches
                let userFound = null;
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    if (data.password === password) {
                        userFound = data;
                    }
                });

                if (!userFound) {
                    showPopup('error', 'Login Failed', 'Incorrect password.');
                    return;
                }

                // 3. Login Success
                currentUserData = {
                    uid: userFound.uid,
                    name: userFound.name,
                    email: userFound.email
                };
                isCustomerLoggedIn = true;
                localStorage.setItem('currentCustomer', JSON.stringify(currentUserData));

                // Update last login
                try {
                     await window.firebaseSetDoc(
                        window.firebaseDoc(window.firebaseDB, 'users', userFound.uid),
                        { lastLogin: window.firebaseTimestamp() },
                        { merge: true }
                    );
                } catch(e) { console.log('Login timestamp update skipped'); }

                updateCustomerUI();
                closeCustomerModal();
                showNotification(' Signed in successfully');

            } catch (error) {
                console.error('Login Error:', error);
                showPopup('error', 'Login Error', 'Something went wrong. Please try again.');
            }
        }

        // Logout
        function logoutCustomer() {
            localStorage.removeItem('currentCustomer');
            currentUserData = null;
            isCustomerLoggedIn = false;
            updateCustomerUI();
            showNotification(' Signed out');
        }

        function updateCustomerUI() {
            const navLinks = document.querySelector('.nav-links');
            if(!navLinks) return;
            
            // Check local storage if memory is empty (page refresh case)
            if(!currentUserData) {
                try {
                    const saved = localStorage.getItem('currentCustomer');
                    if(saved) {
                        currentUserData = JSON.parse(saved);
                        isCustomerLoggedIn = true;
                    }
                } catch(e){}
            }

            if(currentUserData && isCustomerLoggedIn) {
                const customerArea = document.getElementById('customerArea');
                if(customerArea) {
                    customerArea.innerHTML = `<span>Hi, ${escapeHtml(currentUserData.name)}</span><button onclick="logoutCustomer()">Logout</button>`;
                }
                const signInBtn = navLinks.querySelector('button[onclick="openCustomerModal()"]');
                if(signInBtn && signInBtn.parentElement) { signInBtn.style.display = 'none'; }
            } else {
                const customerArea = document.getElementById('customerArea');
                if(customerArea) customerArea.innerHTML = '';
                const signInBtn = navLinks.querySelector('button[onclick="openCustomerModal()"]');
                if(signInBtn) signInBtn.style.display = '';
            }
        }

        function escapeHtml(str) {
            return String(str).replace(/[&<>"'`=\/]/g, s => ({
                '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;', '/': '&#x2F;', '`': '&#x60;', '=': '&#x3D;'
            })[s]);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const signupForm = document.getElementById('customerSignupForm');
            const loginForm = document.getElementById('customerLoginForm');
            if(signupForm) signupForm.addEventListener('submit', handleCustomerSignup);
            if(loginForm) loginForm.addEventListener('submit', handleCustomerLogin);
            
            // Auto initialize UI from local storage
            updateCustomerUI();
        });

        // Listen for bookings changes from other tabs/windows and update admin view
        window.addEventListener('storage', (e) => {
            if (e.key === 'restaurantBookings') {
                try {
                    bookings = JSON.parse(e.newValue) || [];
                    if (document.getElementById('adminPanel').style.display === 'block') {
                        updateBookingsDisplay();
                    }
                    showNotification(' New booking received');
                    try { incrementNotificationBadge(1); } catch(e){}
                } catch (err) {
                    console.warn('Failed to parse restaurantBookings from storage event', err);
                }
            }
        });

        function logoutAdmin() {
            isAdminLoggedIn = false;
            // remove fullscreen and restore page scroll
            const modal = document.getElementById('adminModal');
            if(modal){ modal.classList.remove('admin-full'); }
            document.body.style.overflow = '';
            showAdminLogin();
            showNotification(' Admin logged out successfully!');
        }

        // WebAuthn Fingerprint Registration
        async function registerFingerprint() {
            try {
                // Check if WebAuthn is supported
                if (!window.PublicKeyCredential) {
                    showNotification(' Biometric authentication not supported in this browser');
                    return;
                }

                showNotification(' Preparing fingerprint registration...');

                // Create a simple challenge
                const challenge = crypto.getRandomValues(new Uint8Array(32));

                const publicKeyCredentialCreationOptions = {
                    challenge: challenge,
                    rp: {
                        name: "REHAN'S Multi Cuisine Restaurants",
                        id: window.location.hostname
                    },
                    user: {
                        id: crypto.getRandomValues(new Uint8Array(16)),
                        name: "admin",
                        displayName: "Restaurant Admin"
                    },
                    pubKeyCredParams: [
                        { type: "public-key", alg: -7 }, // ES256
                        { type: "public-key", alg: -257 } // RS256
                    ],
                    authenticatorSelection: {
                        authenticatorAttachment: "platform", // Use built-in sensor
                        userVerification: "preferred", // Allow fingerprint/face
                        requireResidentKey: false
                    },
                    timeout: 60000,
                    attestation: "none" // Don't require attestation for simplicity
                };

                showNotification(' Please use your fingerprint sensor...');

                // Create credential
                const credential = await navigator.credentials.create({
                    publicKey: publicKeyCredentialCreationOptions
                });

                // Store credential data
                const credentialData = {
                    id: credential.id,
                    rawId: arrayBufferToBase64(credential.rawId),
                    type: credential.type,
                    response: {
                        clientDataJSON: arrayBufferToBase64(credential.response.clientDataJSON),
                        attestationObject: arrayBufferToBase64(credential.response.attestationObject)
                    }
                };

                // Save to localStorage
                localStorage.setItem('adminBiometricCredential', JSON.stringify(credentialData));
                biometricCredential = credentialData;

                // Update UI
                document.getElementById('registerBtn').style.display = 'none';
                document.getElementById('resetBtn').style.display = 'inline-block';
                document.getElementById('fingerprintBtn').disabled = false;

                showNotification(' Fingerprint registered successfully! You can now login with biometrics.');

            } catch (error) {
                console.error('Fingerprint registration error:', error);

                if (error.name === 'NotAllowedError') {
                    showNotification(' Registration cancelled. Please try again.');
                } else if (error.name === 'NotSupportedError') {
                    showNotification(' Biometric authentication not supported on this device.');
                } else if (error.name === 'SecurityError') {
                    showNotification(' Security error. Make sure you\'re on HTTPS or localhost.');
                } else {
                    showNotification(' Registration failed: ' + error.message);
                }
            }
        }

        // WebAuthn Fingerprint Authentication
        async function loginWithFingerprint() {
            try {
                if (!biometricCredential) {
                    showNotification(' No fingerprint registered. Please register first.');
                    return;
                }

                showNotification(' Please authenticate with your fingerprint...');

                // Create authentication options
                const challenge = crypto.getRandomValues(new Uint8Array(32));

                const publicKeyCredentialRequestOptions = {
                    challenge: challenge,
                    allowCredentials: [{
                        id: base64ToArrayBuffer(biometricCredential.rawId),
                        type: "public-key",
                        transports: ["internal", "usb", "ble", "nfc"]
                    }],
                    timeout: 60000,
                    userVerification: "preferred"
                };

                // Get credential
                const assertion = await navigator.credentials.get({
                    publicKey: publicKeyCredentialRequestOptions
                });

                // Basic verification for demo
                const clientDataJSON = JSON.parse(new TextDecoder().decode(assertion.response.clientDataJSON));

                if (clientDataJSON.type === "webauthn.get") {
                    isAdminLoggedIn = true;
                    showAdminPanel();
                    try { renderAdminMenuList(); } catch(e){}
                    showNotification(' Biometric login successful!');
                } else {
                    throw new Error('Invalid authentication response');
                }

            } catch (error) {
                console.error('Fingerprint authentication failed:', error);

                if (error.name === 'NotAllowedError') {
                    showNotification(' Authentication cancelled or failed');
                } else if (error.name === 'SecurityError') {
                    showNotification(' Security error. Please try again.');
                } else {
                    showNotification(' Biometric authentication failed: ' + error.message);
                }
            }
        }

        // Reset biometric credentials
        function resetBiometric() {
            if (confirm('Are you sure you want to reset biometric authentication? You will need to register again.')) {
                localStorage.removeItem('adminBiometricCredential');
                biometricCredential = null;
                document.getElementById('registerBtn').style.display = 'inline-block';
                document.getElementById('resetBtn').style.display = 'none';
                document.getElementById('fingerprintBtn').disabled = true;
                showNotification(' Biometric authentication reset. Please register again.');
            }
        }

        // Utility functions for base64 conversion
        function arrayBufferToBase64(buffer) {
            const bytes = new Uint8Array(buffer);
            let binary = '';
            for (let i = 0; i < bytes.byteLength; i++) {
                binary += String.fromCharCode(bytes[i]);
            }
            return window.btoa(binary);
        }

        function base64ToArrayBuffer(base64) {
            const binary = window.atob(base64);
            const bytes = new Uint8Array(binary.length);
            for (let i = 0; i < binary.length; i++) {
                bytes[i] = binary.charCodeAt(i);
            }
            return bytes.buffer;
        }

        // Admin password login form handler
        const adminLoginForm = document.getElementById('adminLoginForm');
        if (adminLoginForm) {
            adminLoginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const password = document.getElementById('adminPassword').value;
                
                if (password === 'admin123') {
                    isAdminLoggedIn = true;
                    // show fullscreen admin panel and render manager
                    showAdminPanel();
                    try { renderAdminMenuList(); } catch(e){}
                    document.getElementById('adminPassword').value = '';
                    showNotification(' Admin login successful!');
                } else {
                    showNotification(' Invalid password!');
                    document.getElementById('adminPassword').value = '';
                }
            });
        }

        // Customer signup form handler - saves email for order confirmations
        const customerSignupForm = document.getElementById('customerSignupForm');
        if (customerSignupForm) {
            customerSignupForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                
                // Save customer details to localStorage
                localStorage.setItem('customerEmail', email);
                localStorage.setItem('customerName', name);
                localStorage.setItem('customerLoggedIn', 'true');
                
                showNotification(` Account created! Welcome, ${name}!`);
                closeCustomerModal();
                
                // Update UI to show logged in state
                try {
                    const loginBtn = document.querySelector('.nav-links .login-btn');
                    if (loginBtn) {
                        loginBtn.innerHTML = `<i class="fas fa-user"></i> ${name.split(' ')[0]}`;
                    }
                } catch(e) {}
            });
        }

        // Customer login form handler
        const customerLoginForm = document.getElementById('customerLoginForm');
        if (customerLoginForm) {
            customerLoginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('customerEmail').value;
                const password = document.getElementById('customerPassword').value;
                
                // Save customer email to localStorage for order confirmations
                localStorage.setItem('customerEmail', email);
                localStorage.setItem('customerLoggedIn', 'true');
                
                showNotification(` Welcome back!`);
                closeCustomerModal();
            });
        }

        function addSampleBooking() {
            const sampleBookings = [
                { name: 'John Doe', email: 'john@example.com', date: '2025-12-20', time: '19:00', guests: 4 },
                { name: 'Jane Smith', email: 'jane@example.com', date: '2025-12-21', time: '20:00', guests: 2 },
                { name: 'Mike Johnson', email: 'mike@example.com', date: '2025-12-22', time: '18:30', guests: 6 },
                { name: 'Sarah Wilson', email: 'sarah@example.com', date: '2025-12-23', time: '19:30', guests: 3 }
            ];
            
            const randomBooking = sampleBookings[Math.floor(Math.random() * sampleBookings.length)];
            bookings.push({
                ...randomBooking,
                id: Date.now(),
                status: 'Confirmed'
            });
            
            saveBookings();
            updateBookingsDisplay();
            showNotification(' Sample booking added!');
        }

        function deleteBooking(id) {
            if (confirm('Are you sure you want to delete this booking?')) {
                bookings = bookings.filter(booking => booking.id !== id);
                saveBookings();
                updateBookingsDisplay();
                showNotification(' Booking deleted!');
            }
        }

        function clearAllBookings() {
            if (confirm('Are you sure you want to clear all bookings?')) {
                bookings = [];
                saveBookings();
                updateBookingsDisplay();
                showNotification(' All bookings cleared!');
            }
        }

        function saveBookings() {
            localStorage.setItem('restaurantBookings', JSON.stringify(bookings));
        }

        function updateBookingsDisplay() {
            const tableBody = document.getElementById('bookingsTable');
            const totalElement = document.getElementById('totalBookings');
            
            totalElement.textContent = bookings.length;
            
            tableBody.innerHTML = '';
            
            if (bookings.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px; color: #666;">No bookings yet. Click "Add Sample Booking" to add some data.</td></tr>';
                return;
            }
            
            bookings.forEach(booking => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="padding: 10px; border: 1px solid #ddd;">${booking.name}</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">${booking.email}</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">${booking.date}</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">${booking.time}</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">${booking.guests}</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">
                        <button onclick="deleteBooking(${booking.id})" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Delete</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // --- MODAL LOGIC ---
        const modal = document.getElementById('reservationModal');

        function openModal() {
            modal.classList.add('show');
            const navLinks = document.querySelector('.nav-links');
            if (navLinks) {
                navLinks.classList.remove('active'); // Close mobile menu if open
            }
        }

        function closeModal() {
            modal.classList.remove('show');
        }

        // Close on outside click
        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
            if (event.target == document.getElementById('adminModal')) {
                closeAdminModal();
            }
        }

        // --- FORM VALIDATION & EMAIL INTEGRATION ---
        const contactForm = document.getElementById('contactForm');
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const phone = document.getElementById('contactPhone').value;
            const message = document.getElementById('contactMessage').value;

            if(name && email && phone && message) {
                // Show loading state
                const submitBtn = contactForm.querySelector('button[type="submit"]');
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Sending...';
                submitBtn.disabled = true;
                
                // Save to Firebase Firestore
                try {
                    if (window.firebaseReady) {
                        const contactData = {
                            name: name,
                            email: email,
                            phone: phone,
                            message: message,
                            status: 'unread',
                            createdAt: window.firebaseTimestamp(),
                            type: 'contact_message'
                        };
                        
                        const docRef = await window.firebaseAddDoc(
                            window.firebaseCollection(window.firebaseDB, 'contacts'),
                            contactData
                        );
                        console.log(' Contact saved to Firebase with ID:', docRef.id);
                    }
                } catch (firebaseError) {
                    console.error('Firebase save error:', firebaseError);
                }
                
                // Template parameters for EmailJS
                const templateParams = {
                    to_email: 'mohammedmohathaseem25@gmail.com',
                    from_name: name,
                    from_email: email,
                    phone: phone,
                    message: message,
                    reply_to: email
                };
                
                // Send email using EmailJS
                emailjs.send(
                    'service_2x94jhf',
                    'template_sy5295a',
                    templateParams
                )
                .then(
                    function(response) {
                        console.log('SUCCESS!', response.status, response.text);
                        showNotification(` Thank you ${name}! Your message has been sent successfully.`);
                        contactForm.reset();
                        
                        // Reset button
                        submitBtn.textContent = originalText;
                        submitBtn.disabled = false;
                    },
                    function(error) {
                        console.error('FAILED...', error);
                        
                        // Check if EmailJS is configured
                        if (error.text && error.text.includes('publicKey')) {
                            showPopup('warning', 'EmailJS Not Configured', 'EmailJS is not configured yet. Please set up Public Key, Service ID, and Template ID. See console for details.');
                            console.error('EmailJS Configuration Missing:', {
                                message: 'You need to replace YOUR_PUBLIC_KEY, YOUR_SERVICE_ID, and YOUR_TEMPLATE_ID with your actual EmailJS credentials',
                                getCredentials: 'Visit https://www.emailjs.com to get your credentials'
                            });
                        } else {
                            showPopup('error', 'Message Send Failed', `Error sending message: ${error.text || 'Unknown error'}. Please check your EmailJS configuration or try again later.`);
                        }
                        
                        // Reset button
                        submitBtn.textContent = originalText;
                        submitBtn.disabled = false;
                    }
                );
            } else {
                showPopup('warning', 'Incomplete Form', 'Please fill in all required fields before submitting.');
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const reservationForm = document.getElementById('reservationForm');
            if (reservationForm) {
                reservationForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const name = document.getElementById('bookingName').value;
                    const email = document.getElementById('bookingEmail').value;
                    const phone = document.getElementById('bookingPhone').value;
                    const date = document.getElementById('bookingDate').value;
                    const time = document.getElementById('bookingTime').value;
                    const guests = document.getElementById('bookingGuests').value;
                    const notes = document.getElementById('bookingNotes').value || 'None';
                    
                    // Format date for display
                    const formattedDate = new Date(date).toLocaleDateString('en-IN', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                    
                    // Show loading state
                    const submitBtn = reservationForm.querySelector('button[type="submit"]');
                    const originalText = submitBtn.textContent;
                    submitBtn.textContent = 'Sending...';
                    submitBtn.disabled = true;
                    
                    // Save to Firebase Firestore
                    try {
                        if (window.firebaseReady) {
                            const bookingData = {
                                name: name,
                                email: email,
                                phone: phone,
                                date: date,
                                formattedDate: formattedDate,
                                time: time,
                                guests: parseInt(guests),
                                specialRequests: notes,
                                status: 'pending',
                                createdAt: window.firebaseTimestamp(),
                                type: 'table_reservation'
                            };
                            
                            const docRef = await window.firebaseAddDoc(
                                window.firebaseCollection(window.firebaseDB, 'reservations'),
                                bookingData
                            );
                            console.log(' Reservation saved to Firebase with ID:', docRef.id);
                            
                            // Save to localStorage for admin panel
                            const localBookings = JSON.parse(localStorage.getItem('restaurantBookings')) || [];
                            localBookings.push({
                                id: Date.now(),
                                name: name,
                                email: email,
                                date: date,
                                time: time,
                                guests: parseInt(guests),
                                status: 'Confirmed'
                            });
                            localStorage.setItem('restaurantBookings', JSON.stringify(localBookings));
                            // Update in-memory bookings and admin display so admin sees new booking immediately
                            try {
                                bookings = JSON.parse(localStorage.getItem('restaurantBookings')) || [];
                                if (typeof updateBookingsDisplay === 'function') updateBookingsDisplay();
                                try { incrementNotificationBadge(1); } catch(e){}
                            } catch (e) { console.warn('Could not update admin bookings display:', e); }
                            
                        }
                    } catch (firebaseError) {
                        console.error('Firebase save error:', firebaseError);
                    }
                    
                    // Template parameters for EmailJS
                    const templateParams = {
                        to_email: 'mohammedmohathaseem25@gmail.com',
                        from_name: name,
                        from_email: email,
                        phone: phone,
                        booking_date: formattedDate,
                        booking_time: time,
                        guests: guests,
                        special_requests: notes,
                        reply_to: email,
                        message: `Table Reservation Request:\n\nName: ${name}\nEmail: ${email}\nPhone: ${phone}\nDate: ${formattedDate}\nTime: ${time}\nGuests: ${guests}\nSpecial Requests: ${notes}`
                    };
                    
                    // Send email using EmailJS (Safely)
                    if (typeof emailjs !== 'undefined') {
                        emailjs.send(
                            'service_2x94jhf',
                            'template_sy5295a',
                            templateParams
                        )
                        .then(
                            function(response) {
                                console.log('Reservation sent!', response.status, response.text);
                                // Success handled below
                            },
                            function(error) {
                                console.warn('Email notification failed (but booking saved):', error);
                            }
                        );
                    } else {
                        console.warn('EmailJS not loaded. Skipping email notification.');
                    }

                    // Always show success to user if we reached here (Firestore save attempted)
                    showNotification(` Booking Confirmed for ${formattedDate} at ${time}`);
                    showNotification(` We will contact ${phone} if needed.`);
                    closeModal();
                    reservationForm.reset();
                    
                    // Reset button
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                });
            }
        });

        // --- Admin Menu Management (Admin-only) ---
        (function(){
            try{
                const saved = localStorage.getItem('menuItems');
                if (saved) menuItems = JSON.parse(saved);
            }catch(e){console.warn('Could not load saved menu:', e)}
        })();

        function renderAdminMenuList(){
            const el = document.getElementById('adminMenuList');
            if(!el) return;
            if(!isAdminLoggedIn){
                el.innerHTML = '<p style="color:#ccc">Login to manage menu.</p>';
                return;
            }
            if(!menuItems || menuItems.length === 0){ el.innerHTML = '<p style="color:#ccc">No menu items found.</p>'; return; }
            el.innerHTML = '';
            menuItems.forEach(item => {
                const card = document.createElement('div');
                card.style.display = 'flex';
                card.style.justifyContent = 'space-between';
                card.style.alignItems = 'center';
                card.style.padding = '8px';
                card.style.background = 'rgba(255,255,255,0.03)';
                card.style.borderRadius = '8px';
                card.style.marginBottom = '8px';
                card.innerHTML = `
                    <div style="display:flex;gap:12px;align-items:center;">
                        <img src="${item.img || 'https://via.placeholder.com/64'}" alt="" style="width:64px;height:64px;object-fit:cover;border-radius:8px;">
                        <div>
                            <div style="font-weight:700">${item.name}</div>
                            <div style="color:#ccc;font-size:0.9rem">${item.category}  ${item.price}</div>
                        </div>
                    </div>
                    <div>
                        <button class="btn btn-primary" style="margin-right:8px" onclick="openEditMenuModal(${item.id})">Edit</button>
                        <button class="btn btn-outline" style="background:#dc3545;color:white;border:none" onclick="deleteMenuItem(${item.id})">Delete</button>
                    </div>
                `;
                el.appendChild(card);
            });
        }

        function openEditMenuModal(id){
            const modal = document.getElementById('editMenuModal');
            const form = document.getElementById('editMenuForm');
            form.reset();
            document.getElementById('editItemId').value = id || '';
            if(id){
                const it = menuItems.find(m=>m.id === id);
                if(it){
                    document.getElementById('editName').value = it.name || '';
                    document.getElementById('editPrice').value = it.price || '';
                    document.getElementById('editCategory').value = it.category || '';
                    document.getElementById('editImg').value = it.img || '';
                    document.getElementById('editDesc').value = it.desc || '';
                    document.getElementById('editModalTitle').textContent = 'Edit Menu Item';
                }
            } else {
                document.getElementById('editModalTitle').textContent = 'Add Menu Item';
            }
            modal.classList.add('show');
        }

        function closeEditMenuModal(){
            const modal = document.getElementById('editMenuModal');
            if(modal) modal.classList.remove('show');
        }

        document.getElementById('editMenuForm').addEventListener('submit', function(e){
            e.preventDefault();
            const idVal = document.getElementById('editItemId').value;
            const name = document.getElementById('editName').value.trim();
            const price = document.getElementById('editPrice').value.trim();
            const category = document.getElementById('editCategory').value.trim();
            const img = document.getElementById('editImg').value.trim();
            const desc = document.getElementById('editDesc').value.trim();

            if(idVal){
                const id = parseInt(idVal, 10);
                const idx = menuItems.findIndex(m=>m.id === id);
                if(idx > -1){
                    menuItems[idx].name = name;
                    menuItems[idx].price = price;
                    menuItems[idx].category = category;
                    menuItems[idx].img = img;
                    menuItems[idx].desc = desc;
                }
            } else {
                const newId = menuItems.length ? Math.max(...menuItems.map(m=>m.id)) + 1 : 1;
                menuItems.push({ id: newId, name, price, category, img, desc });
            }

            localStorage.setItem('menuItems', JSON.stringify(menuItems));
            renderAdminMenuList();
            const activeBtn = document.querySelector('.filter-btn.active');
            const filter = activeBtn ? activeBtn.getAttribute('data-filter') : 'all';
            loadMenu(filter);
            closeEditMenuModal();
            showNotification(' Menu updated');
        });

        function deleteMenuItem(id){
            if(!confirm('Delete this menu item?')) return;
            menuItems = menuItems.filter(m=>m.id !== id);
            localStorage.setItem('menuItems', JSON.stringify(menuItems));
            renderAdminMenuList();
            const activeBtn = document.querySelector('.filter-btn.active');
            const filter = activeBtn ? activeBtn.getAttribute('data-filter') : 'all';
            loadMenu(filter);
            showNotification(' Item deleted');
        }

        // Ensure admin menu list shows on load
        document.addEventListener('DOMContentLoaded', function(){
            renderAdminMenuList();
        });

        // --- CUSTOM POPUP SYSTEM ---
        // Custom popup function to replace alert() calls
        function showPopup(type, title, message) {
            const overlay = document.getElementById('popupOverlay');
            const modal = document.getElementById('popupModal');
            const icon = document.getElementById('popupIcon');
            const titleEl = document.getElementById('popupTitle');
            const messageEl = document.getElementById('popupMessage');

            // Set content
            titleEl.textContent = title;
            messageEl.textContent = message;

            // Set type and icon
            modal.className = 'popup-modal ' + type;
            
            const icons = {
                success: '',
                error: '',
                warning: '',
                info: ''
            };
            icon.textContent = icons[type] || icons.info;

            // Show popup
            overlay.classList.add('active');
        }

        // Custom payment confirmation popup
        function showPaymentConfirmation(total, orderId) {
            const overlay = document.getElementById('popupOverlay');
            const modal = document.getElementById('popupModal');
            const icon = document.getElementById('popupIcon');
            const titleEl = document.getElementById('popupTitle');
            const messageEl = document.getElementById('popupMessage');

            // Set content
            titleEl.innerHTML = ' Order Confirmed!';
            messageEl.innerHTML = `
                <div style="text-align: left; margin: 20px 0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3);">
                        <span style="color: rgba(255,255,255,0.7);">Payment Amount:</span>
                        <span style="color: #d4af37; font-weight: 700; font-size: 1.2rem;">${total.toLocaleString('en-IN')}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <span style="color: rgba(255,255,255,0.7);">Order ID:</span>
                        <span style="color: #fff; font-weight: 600;">${orderId}</span>
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(212, 175, 55, 0.1); border-radius: 10px; border-left: 3px solid #d4af37;">
                        <p style="color: rgba(255,255,255,0.9); margin: 0; line-height: 1.6;">
                            Thank you for ordering from <strong style="color: #d4af37;">REHAN'S Multi Cuisine Restaurants</strong>! Your delicious food will be prepared and ready soon.
                        </p>
                    </div>
                </div>
            `;

            // Set type and icon for payment confirmation
            modal.className = 'popup-modal payment-success';
            icon.innerHTML = '';

            // Show popup
            overlay.classList.add('active');
        }

        // Custom checkout confirmation popup
        function showCheckoutConfirmation(subtotal, discount, finalTotal) {
            const overlay = document.getElementById('popupOverlay');
            const modal = document.getElementById('popupModal');
            const icon = document.getElementById('popupIcon');
            const titleEl = document.getElementById('popupTitle');
            const messageEl = document.getElementById('popupMessage');

            // Set content
            titleEl.innerHTML = ' Order Summary';
            
            let summaryHTML = `
                <div style="text-align: left; margin: 20px 0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3);">
                        <span style="color: rgba(255,255,255,0.7);">Subtotal:</span>
                        <span style="color: #fff; font-weight: 600;">${subtotal.toLocaleString('en-IN')}</span>
                    </div>`;
            
            if (discount > 0) {
                summaryHTML += `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(212, 175, 55, 0.3);">
                        <span style="color: rgba(255,255,255,0.7);">Discount (20%):</span>
                        <span style="color: #10b981; font-weight: 600;">-${discount.toLocaleString('en-IN')}</span>
                    </div>`;
            }
            
            summaryHTML += `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <span style="color: rgba(255,255,255,0.9); font-size: 1.1rem; font-weight: 600;">Total:</span>
                        <span style="color: #d4af37; font-weight: 700; font-size: 1.3rem;">${finalTotal.toLocaleString('en-IN')}</span>
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(212, 175, 55, 0.1); border-radius: 10px; border-left: 3px solid #d4af37;">
                        <p style="color: rgba(255,255,255,0.9); margin: 0; line-height: 1.6; font-size: 0.95rem;">
                            Proceed to payment?
                        </p>
                    </div>
                </div>
            `;
            
            messageEl.innerHTML = summaryHTML;

            // Set type and icon for checkout confirmation
            modal.className = 'popup-modal checkout-confirm';
            icon.innerHTML = '';

            // Store amount for payment
            modal.setAttribute('data-amount', finalTotal);

            // Show popup with confirm buttons
            overlay.classList.add('active');
            showConfirmButtons();
        }

        function showConfirmButtons() {
            const btnContainer = document.getElementById('popupButtons');
            btnContainer.innerHTML = `
                <button class="popup-btn popup-btn-cancel" onclick="closePopup()">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="popup-btn popup-btn-confirm" onclick="confirmCheckout()">
                    <i class="fas fa-check"></i> Proceed to Payment
                </button>
            `;
        }

        function confirmCheckout() {
            const modal = document.getElementById('popupModal');
            const amount = parseFloat(modal.getAttribute('data-amount'));
            closePopup();
            openUpiModal(amount);
        }

        function closePopup() {
            const overlay = document.getElementById('popupOverlay');
            overlay.classList.remove('active');
            
            // Reset to single OK button
            const btnContainer = document.getElementById('popupButtons');
            btnContainer.innerHTML = '<button class="popup-btn" onclick="closePopup()">OK</button>';
        }

        // Close popup when clicking outside
        document.getElementById('popupOverlay')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closePopup();
            }
        });

    </script>



    <style>
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        .modal-content {
            background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
            margin: auto;
            padding: 30px;
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
            transition: color 0.3s;
        }

        .close:hover,
        .close:focus {
            color: var(--primary);
            text-decoration: none;
            cursor: pointer;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-header h2 {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .modal-header p {
            color: #ccc;
            font-size: 0.9rem;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #ddd;
            font-weight: 500;
            font-size: 0.9rem;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #fff;
            font-family: inherit;
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.1);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.2);
        }
        
        /* Fix for date/time inputs on dark bg */
        input[type="date"]::-webkit-calendar-picker-indicator,
        input[type="time"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
        }
        @media (max-width: 600px) {
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>

    <!-- Custom Popup Modal -->
    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-modal" id="popupModal">
            <div class="popup-icon" id="popupIcon"></div>
            <h2 class="popup-title" id="popupTitle"></h2>
            <p class="popup-message" id="popupMessage"></p>
            <div class="popup-buttons" id="popupButtons">
                <button class="popup-btn" onclick="closePopup()">OK</button>
            </div>
        </div>
    </div>

    <style>
        /* Custom Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 99999;
            animation: fadeIn 0.3s ease-out;
        }

        .popup-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes popupSlide {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .popup-modal {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px 35px;
            max-width: 400px;
            width: 90%;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.8),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            animation: popupSlide 0.3s ease-out;
        }

        .popup-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2rem;
        }

        .popup-modal.success .popup-icon {
            background: linear-gradient(135deg, #10b981, #34d399);
            box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4);
        }

        .popup-modal.error .popup-icon {
            background: linear-gradient(135deg, #ef4444, #f87171);
            box-shadow: 0 8px 24px rgba(239, 68, 68, 0.4);
        }

        .popup-modal.warning .popup-icon {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.4);
        }

        .popup-modal.info .popup-icon {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
        }

        .popup-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 12px;
        }

        .popup-message {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .popup-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .popup-btn {
            padding: 10px 24px;
            background: linear-gradient(135deg, #d4af37, #f3e5ab);
            border: none;
            border-radius: 10px;
            color: #0f0f0f;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.4);
            min-width: 100px;
            max-width: 180px;
        }

        .popup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(212, 175, 55, 0.6);
        }

        .popup-btn-cancel {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        .popup-btn-cancel:hover {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3);
        }

        .popup-btn-confirm {
            background: linear-gradient(135deg, #d4af37, #f3e5ab);
            color: #0f0f0f;
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.5);
        }

        .popup-btn-confirm:hover {
            background: linear-gradient(135deg, #f3e5ab, #d4af37);
            box-shadow: 0 6px 24px rgba(212, 175, 55, 0.7);
        }

        /* Payment Success Popup Style */
        .popup-modal.payment-success {
            max-width: 500px;
        }

        .popup-modal.payment-success .popup-icon {
            background: linear-gradient(135deg, #d4af37, #f3e5ab);
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.5);
            color: #0f0f0f;
            font-weight: 900;
            font-size: 2.5rem;
        }

        .popup-modal.payment-success .popup-title {
            background: linear-gradient(135deg, #d4af37, #f3e5ab);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.8rem;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .popup-modal {
                padding: 30px 25px;
            }
        }
    </style>




    <!-- FRESH NEW NOTIFICATION BELL ICON -->
    <div class="notif-bell-icon" id="notifBellIcon" onclick="openNotifPanel()" title="Notifications" style="position:fixed;bottom:170px;right:25px;width:50px;height:50px;background:var(--primary);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 20px rgba(0,0,0,0.3);transition:all 0.3s ease;z-index:1000;">
        <i class="fas fa-bell" style="font-size:1.3rem;color:var(--dark);"></i>
        <div class="notif-count" id="notifCount" style="display:none;position:absolute;top:-5px;right:-5px;background:#ef4444;color:white;border-radius:50%;min-width:22px;height:22px;display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:700;">0</div>
    </div>
    
    <style>
        @media (max-width: 768px) {
            .notif-bell-icon {
                bottom: 160px !important;
                right: 15px !important;
                width: 48px !important;
                height: 48px !important;
            }
            .notif-bell-icon i {
                font-size: 1.2rem !important;
            }
            .notif-count {
                min-width: 20px !important;
                height: 20px !important;
                font-size: 0.65rem !important;
            }
        }
        
        @media (max-width: 480px) {
            .notif-bell-icon {
                bottom: 165px !important;
                right: 10px !important;
                width: 46px !important;
                height: 46px !important;
            }
        }
    </style>

    <!-- FRESH NEW NOTIFICATION PANEL -->
    <div class="notif-panel" id="notifPanel" style="display:none;position:fixed;right:0;top:0;width:420px;height:100%;background:var(--dark-glass);backdrop-filter:blur(20px);box-shadow:-5px 0 30px rgba(0,0,0,0.5);z-index:1500;">
        <div style="padding:25px 20px;border-bottom:1px solid rgba(255,255,255,0.1);display:flex;justify-content:space-between;align-items:center;">
            <h2 style="margin:0;font-size:1.5rem;color:var(--primary);"> Notifications</h2>
            <span onclick="closeNotifPanel()" style="font-size:2rem;cursor:pointer;color:rgba(255,255,255,0.6);">&times;</span>
        </div>
        <div id="notifContent" style="flex:1;overflow-y:auto;padding:15px;height:calc(100% - 80px);">
            <div style="text-align:center;padding:50px 20px;color:rgba(255,255,255,0.5);">
                <i class="fas fa-bell-slash" style="font-size:3rem;opacity:0.3;"></i>
                <p>No notifications yet</p>
            </div>
        </div>
    </div>

    <script>
        // BRAND NEW NOTIFICATION SYSTEM - FRESH START
        let notifications = [];
        
        // Load notifications from localStorage
        try {
            const stored = localStorage.getItem('freshNotifications');
            if (stored) notifications = JSON.parse(stored);
        } catch(e) {}
        
        // Save notifications
        function saveNotifs() {
            localStorage.setItem('freshNotifications', JSON.stringify(notifications));
        }
        
        // Add notification
        function createNotif(type, title, message, details) {
            notifications.unshift({
                id: Date.now(),
                type: type,
                title: title,
                message: message,
                details: details || null,
                time: Date.now(),
                read: false
            });
            if (notifications.length > 30) notifications.length = 30;
            saveNotifs();
            updateBadge();
            showNotifToast(title);
        }
        
        // Show toast notification
        function showNotifToast(text) {
            const toast = document.createElement('div');
            toast.textContent = text;
            toast.style.cssText = 'position:fixed;bottom:240px;right:25px;background:var(--primary);color:var(--dark);padding:15px 20px;border-radius:10px;font-weight:600;z-index:2000;animation:slideIn 0.3s ease;';
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
        
        // Update badge count
        function updateBadge() {
            const count = notifications.filter(n => !n.read).length;
            const badge = document.getElementById('notifCount');
            if (count > 0) {
                badge.textContent = count;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }
        
        // Open panel
        function openNotifPanel() {
            document.getElementById('notifPanel').style.display = 'block';
            renderNotifs();
        }
        
        // Close panel
        function closeNotifPanel() {
            document.getElementById('notifPanel').style.display = 'none';
        }
        
        // Delete notification
        function deleteNotif(id, event) {
            event.stopPropagation();
            notifications = notifications.filter(n => n.id !== id);
            saveNotifs();
            updateBadge();
            renderNotifs();
        }
        
        // Render notifications
        function renderNotifs() {
            const container = document.getElementById('notifContent');
            if (notifications.length === 0) {
                container.innerHTML = '<div style="text-align:center;padding:50px 20px;color:rgba(255,255,255,0.5);"><i class="fas fa-bell-slash" style="font-size:3rem;opacity:0.3;"></i><p>No notifications yet</p></div>';
                return;
            }
            
            const icons = {order: '', booking: '', menu: ''};
            container.innerHTML = notifications.map(n => {
                const timeAgo = getTimeAgo(n.time);
                const bgColor = n.read ? 'rgba(255,255,255,0.05)' : 'rgba(212,175,55,0.1)';
                const borderColor = n.read ? 'var(--primary)' : '#fbbf24';
                
                let detailsHTML = '';
                
                // Show order items with images
                if (n.type === 'order' && n.details && n.details.items) {
                    detailsHTML = `
                        <div style="margin-top:10px;padding-top:10px;border-top:1px solid rgba(255,255,255,0.1);">
                            ${n.details.items.map(item => `
                                <div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;background:rgba(0,0,0,0.2);padding:8px;border-radius:6px;">
                                    <img src="${item.image || 'https://via.placeholder.com/60'}" style="width:60px;height:60px;border-radius:6px;object-fit:cover;">
                                    <div style="flex:1;">
                                        <div style="font-weight:600;color:#fff;">${item.name}</div>
                                        <div style="color:rgba(255,255,255,0.6);font-size:0.85rem;">${item.price}  ${item.quantity}</div>
                                    </div>
                                    <div style="color:var(--primary);font-weight:700;">${item.price * item.quantity}</div>
                                </div>
                            `).join('')}
                            <div style="text-align:right;margin-top:10px;padding-top:10px;border-top:1px solid rgba(255,255,255,0.1);">
                                <div style="font-size:1.1rem;font-weight:700;color:var(--primary);">Total: ${n.details.total || 0}</div>
                            </div>
                        </div>
                    `;
                }
                
                return `
                    <div onclick="markRead(${n.id})" style="background:${bgColor};border-left:4px solid ${borderColor};border-radius:10px;padding:15px;margin-bottom:12px;position:relative;transition:all 0.3s;">
                        <button onclick="deleteNotif(${n.id}, event)" style="position:absolute;top:10px;right:10px;background:rgba(255,0,0,0.2);border:1px solid rgba(255,0,0,0.4);color:#ff6b6b;width:28px;height:28px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.3s;" onmouseover="this.style.background='rgba(255,0,0,0.3)'" onmouseout="this.style.background='rgba(255,0,0,0.2)'">
                            <i class="fas fa-times" style="font-size:0.9rem;"></i>
                        </button>
                        <div style="display:flex;gap:10px;cursor:pointer;">
                            <div style="font-size:2rem;">${icons[n.type] || ''}</div>
                            <div style="flex:1;padding-right:30px;">
                                <div style="font-weight:600;color:#fff;margin-bottom:5px;">${n.title}</div>
                                <div style="color:rgba(255,255,255,0.7);font-size:0.9rem;margin-bottom:8px;">${n.message}</div>
                                ${detailsHTML}
                                <div style="color:rgba(255,255,255,0.5);font-size:0.8rem;margin-top:8px;">${timeAgo}</div>
                            </div>
                            ${!n.read ? '<div style="width:8px;height:8px;background:#fbbf24;border-radius:50%;margin-top:5px;"></div>' : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Mark as read
        function markRead(id) {
            const notif = notifications.find(n => n.id === id);
            if (notif) {
                notif.read = true;
                saveNotifs();
                updateBadge();
                renderNotifs();
            }
        }
        
        // Time ago helper
        function getTimeAgo(timestamp) {
            const seconds = Math.floor((Date.now() - timestamp) / 1000);
            if (seconds < 60) return 'Just now';
            if (seconds < 3600) return Math.floor(seconds / 60) + 'm ago';
            if (seconds < 86400) return Math.floor(seconds / 3600) + 'h ago';
            return Math.floor(seconds / 86400) + 'd ago';
        }
        
        
        
        // Monitor cart for orders
        let lastCart = 0;
        let savedCartItems = [];
        setInterval(() => {
            const cartBadge = document.getElementById('cartBadge');
            if (cartBadge) {
                const current = parseInt(cartBadge.textContent) || 0;
                
                // Save cart items when cart has items
                if (current > 0) {
                    try {
                        // Try multiple localStorage keys
                        const cartData = localStorage.getItem('cartItems') || 
                                       localStorage.getItem('cart') || 
                                       localStorage.getItem('Cart');
                        
                        if (cartData) {
                            savedCartItems = JSON.parse(cartData);
                            console.log('Cart saved:', savedCartItems);
                        } else if (window.cart && Array.isArray(window.cart)) {
                            savedCartItems = window.cart;
                            console.log('Cart from window:', savedCartItems);
                        }
                    } catch(e) {
                        console.error('Error saving cart:', e);
                    }
                }
                
                // Detect order placement (cart cleared AND actual checkout in progress)
                if (current === 0 && lastCart > 0 && window.orderInProgress) {
                    console.log('Order detected! Last cart:', lastCart, 'Saved items:', savedCartItems);
                    
                    if (savedCartItems.length > 0) {
                        // Has cart details - create rich notification
                        const total = savedCartItems.reduce((sum, item) => {
                            const price = parseFloat(item.price) || 0;
                            const qty = parseInt(item.quantity) || 1;
                            return sum + (price * qty);
                        }, 0);
                        
                        createNotif('order', 'Order Placed! ', 
                            `Your order for ${lastCart} items has been placed successfully.`,
                            {
                                items: savedCartItems.map(item => ({
                                    name: item.name || item.title || 'Item',
                                    price: parseFloat(item.price) || 0,
                                    quantity: parseInt(item.quantity) || 1,
                                    image: item.img || item.image || 'https://via.placeholder.com/60'
                                })),
                                total: total
                            }
                        );
                    } else {
                        // No cart details - create simple notification
                        console.log('Creating simple notification');
                        createNotif('order', 'Order Placed! ', 
                            `Your order for ${lastCart} items has been placed successfully.`);
                    }
                    savedCartItems = [];
                    window.orderInProgress = false; // Reset flag after notification
                }
                lastCart = current;
            }
        }, 1000);
        
        // Monitor for booking success
        const mutationObs = new MutationObserver(mutations => {
            mutations.forEach(mutation => {
                mutation.addedNodes.forEach(node => {
                    if (node.nodeType === 1) {
                        const text = (node.textContent || '').toLowerCase();
                        if ((text.includes('booking') || text.includes('reservation')) && 
                            (text.includes('confirmed') || text.includes('success'))) {
                            setTimeout(() => {
                                createNotif('booking', 'Table Booked! ', 
                                    'Your reservation has been confirmed.');
                            }, 500);
                        }
                    }
                });
            });
        });
        mutationObs.observe(document.body, {childList: true, subtree: true});
        
        // Initialize
        updateBadge();
    </script>
    <script>
        // Check if app is installed
        let deferredPrompt;
        const pwaInstallItem = document.getElementById('pwaInstallItem');
        const pwaInstallBtn = document.getElementById('pwaInstallBtn');

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later.
            deferredPrompt = e;
            // Update UI notify the user they can add to home screen
            if (pwaInstallItem) pwaInstallItem.style.display = 'block';
        });

        if (pwaInstallBtn) {
            pwaInstallBtn.addEventListener('click', (e) => {
                // hide our user interface that shows our A2HS button
                pwaInstallItem.style.display = 'none';
                // Show the prompt
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    // Wait for the user to respond to the prompt
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('User accepted the A2HS prompt');
                        } else {
                            console.log('User dismissed the A2HS prompt');
                        }
                        deferredPrompt = null;
                    });
                }
            });
        }

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed:', err));
            });
        }
    </script>
</body>
</html>